{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "f84bb509",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Dependencies and Set Up\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "import matplotlib.pyplot as plt\n",
    "import scipy.stats as st\n",
    "from scipy.stats import linregress\n",
    "import seaborn as sns  # For heatmap visualization\n",
    "from sklearn.preprocessing import StandardScaler"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "eca52de6",
   "metadata": {},
   "outputs": [],
   "source": [
    "%notebook widget"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "d8c853be",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Created a path to the file making it into a dataframe\n",
    "rent_file = pd.read_csv(\"Raw_Price_Data//price.csv\")\n",
    "\n",
    "rent_df = pd.DataFrame(rent_file)\n",
    "\n",
    "rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "49fc5c6a",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Identified what columns are missing data\n",
    "clean_rent_df = rent_df.dropna(how = 'any')\n",
    "\n",
    "clean_rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "fba78162",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Extracted states from data (CA, IL, NY, TX)\n",
    "four_states = [\"NY\", \"CA\", \"IL\", \"TX\"]\n",
    "\n",
    "four_states_df = rent_df[rent_df['State'].isin(four_states)]\n",
    "\n",
    "four_states_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "18b733c4",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Dropped all NaN values\n",
    "rent_df.dropna(inplace = True)\n",
    "\n",
    "#Display the DataFrame\n",
    "rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "4bd55f08",
   "metadata": {},
   "outputs": [],
   "source": [
    "#New York Data Frame\n",
    "NY_state = [\"NY\"]\n",
    "\n",
    "NY_state_df = rent_df[rent_df['State'].isin(NY_state)]\n",
    "\n",
    "NY_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "eae9dbae",
   "metadata": {},
   "outputs": [],
   "source": [
    "#California Data Frame\n",
    "CA_state = [\"CA\"]\n",
    "\n",
    "CA_state_df = rent_df[rent_df['State'].isin(CA_state)]\n",
    "\n",
    "CA_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "id": "312783ef",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Illinois Data Frame\n",
    "IL_state = [\"IL\"]\n",
    "\n",
    "IL_state_df = rent_df[rent_df['State'].isin(IL_state)]\n",
    "\n",
    "IL_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "id": "d124cdef",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Texas Data Frame\n",
    "TX_state = [\"TX\"]\n",
    "\n",
    "TX_state_df = rent_df[rent_df['State'].isin(TX_state)]\n",
    "\n",
    "TX_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "id": "8eff1f5a",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Made all of the columns into a list\n",
    "columns_list = ['January 2011',\n",
    "'February 2011','March 2011','April 2011','May 2011','June 2011','July 2011',\n",
    "'August 2011','September 2011','October 2011','November 2011','December 2011',\n",
    "'January 2012','February 2012','March 2012','April 2012','May 2012','June 2012',\n",
    "'July 2012','August 2012','September 2012','October 2012','November 2012','December 2012',\n",
    "'January 2013','February 2013','March 2013','April 2013','May 2013','June 2013','July 2013',\n",
    "'August 2013','September 2013','October 2013','November 2013','December 2013','January 2014',\n",
    "'February 2014','March 2014','April 2014','May 2014','June 2014','July 2014','August 2014',\n",
    "'September 2014','October 2014','November 2014','December 2014','January 2015','February 2015',\n",
    "'March 2015','April 2015','May 2015','June 2015','July 2015','August 2015','September 2015','October 2015',\n",
    "'November 2015','December 2015','January 2016','February 2016','March 2016','April 2016','May 2016',\n",
    "'June 2016','July 2016','August 2016','September 2016','October 2016','November 2016','December 2016']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "id": "085df55d",
   "metadata": {},
   "outputs": [],
   "source": [
    "# US median rent prices\n",
    "US_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    US_med_rent = np.median(clean_rent_df[i])\n",
    "\n",
    "    US_med_list.append(US_med_rent)\n",
    "\n",
    "print(US_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "id": "748312db",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put US med rent prices for each month and year into a DF\n",
    "US_med_df = pd.DataFrame(US_med_list, columns_list).T \n",
    "\n",
    "US_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "id": "c3a9a223",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in IL\n",
    "IL_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    IL_med_rent = np.median(IL_state_df[i])\n",
    "\n",
    "    IL_med_list.append(IL_med_rent)\n",
    "\n",
    "print(IL_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "id": "f8f91dfc",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put IL med rent prices for each month and year into a DF\n",
    "IL_med_df = pd.DataFrame(IL_med_list, columns_list).T \n",
    "\n",
    "IL_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "id": "a9ede790",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in CA\n",
    "CA_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    CA_med_rent = np.median(CA_state_df[i])\n",
    "\n",
    "    CA_med_list.append(CA_med_rent)\n",
    "\n",
    "print(CA_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "id": "c568511c",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put CA med rent prices for each month and year into a DF\n",
    "CA_med_df = pd.DataFrame(CA_med_list, columns_list).T \n",
    "\n",
    "CA_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "id": "b3737da7",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in TX\n",
    "TX_med_list=[]\n",
    "for i in columns_list:\n",
    "\n",
    "    TX_med_rent = np.median(TX_state_df[i])\n",
    "\n",
    "    TX_med_list.append(TX_med_rent)\n",
    "\n",
    "print(TX_med_list)  \n",
    "\n",
    "   "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "id": "8c799f92",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put TX med rent prices for each month and year into a DF\n",
    "TX_med_df = pd.DataFrame(TX_med_list, columns_list).T \n",
    "\n",
    "TX_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "id": "b42a6fac",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in NY\n",
    "NY_med_list=[]\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    NY_med_rent = np.median(NY_state_df[i])\n",
    "    NY_med_list.append(NY_med_rent)\n",
    "\n",
    "print(NY_med_list)  "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "id": "b6069bab",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Put NY med rent prices for each month and year into a DF\n",
    "NY_med_df = pd.DataFrame(NY_med_list, columns_list).T \n",
    "\n",
    "NY_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "id": "6014fe99",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Combined Median rent data for 4 states\n",
    "TX_CA_df = pd.concat([TX_med_df, CA_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "IL_NY_df = pd.concat([IL_med_df, NY_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "states_med_rent = pd.concat([TX_CA_df, IL_NY_df], axis=0, ignore_index=True)\n",
    "\n",
    "#0 = TX, 1 = CA, 2 = IL, 3 = NY\n",
    "states_med_rent.insert(0, \"States\", [\"TX\", \"CA\", \"IL\", \"NY\"])\n",
    "\n",
    "states_med_rent.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "id": "abcbebd6",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Created a table with US Med in it\n",
    "\n",
    "ALL_med_rent = pd.concat([states_med_rent, US_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "#ALL_med_rent.reset_index(drop=True)\n",
    "#ALL_med_rent.set_index('State', inplace=True, drop=True)\n",
    "#ALL_med_rent[ALL_med_rent.index[-1]] = \"US\"\n",
    "ALL_med_rent.insert(0, \"State\", [\"TX\", \"CA\", \"IL\", \"NY\", \"US\"])\n",
    "\n",
    "ALL_med_rent.drop([\"States\"], axis = 1, inplace=True)\n",
    "ALL_med_rent.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "id": "d999fd01",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for TX by year and make df\n",
    "TX_2011_rents = [1194.0, 1189.0, 1186.0, 1183.0, 1182.0, 1189.0, 1184.0, 1179.0, 1181.0, 1174.0, 1173.0, 1167.0]\n",
    "TX_2012_rents = [1164.0, 1162.0, 1165.0, 1159.0, 1155.0, 1158.0, 1168.0, 1172.0, 1177.0, 1179.0, 1173.0, 1171.0]\n",
    "TX_2013_rents = [1175.0, 1174.0, 1181.0, 1196.0, 1202.0, 1200.0, 1197.0, 1201.0, 1205.0, 1208.0, 1212.0, 1221.0]\n",
    "TX_2014_rents = [1224.0, 1224.0, 1222.0, 1225.0, 1221.0, 1218.0, 1221.0, 1234.0, 1245.0, 1256.0, 1272.0, 1275.0]\n",
    "TX_2015_rents = [1282.0, 1287.0, 1289.0, 1297.0, 1300.0, 1309.0, 1313.0, 1319.0, 1323.0, 1325.0, 1320.0, 1312.0]\n",
    "TX_2016_rents = [1313.0, 1319.0, 1326.0, 1325.0, 1338.0, 1346.0, 1350.0, 1343.0, 1340.0, 1335.0, 1335.0, 1337.0]\n",
    "\n",
    "\n",
    "TX_2011_med = np.median(TX_2011_rents)\n",
    "TX_2012_med = np.median(TX_2012_rents)\n",
    "TX_2013_med = np.median(TX_2013_rents)\n",
    "TX_2014_med = np.median(TX_2014_rents)\n",
    "TX_2015_med = np.median(TX_2015_rents)\n",
    "TX_2016_med = np.median(TX_2016_rents)\n",
    "\n",
    "TX_yearly_rent = {\"2011\":[TX_2011_med], \"2012\" :[TX_2012_med], \"2013\" :[TX_2013_med], \"2014\" :[TX_2014_med], \"2015\" :[TX_2015_med], \"2016\" :[TX_2016_med]}\n",
    "\n",
    "TX_yearly_rent_df = pd.DataFrame(TX_yearly_rent)\n",
    "\n",
    "TX_yearly_rent_df.insert(0, \"State\", [\"TX\"])\n",
    "\n",
    "TX_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "TX_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "id": "22cd0c01",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for CA by year and make df\n",
    "CA_2011_rents = [1770.0, 1754.0, 1738.5, 1729.0, 1716.5, 1717.5, 1719.5, 1718.0, 1712.5, 1710.5, 1710.0, 1705.0]\n",
    "CA_2012_rents = [1702.5, 1695.5, 1696.5, 1697.0, 1700.5, 1713.5, 1710.5, 1709.0, 1702.0, 1704.5, 1700.0, 1701.0]\n",
    "CA_2013_rents = [1707.5, 1718.5, 1728.0, 1735.0, 1743.0, 1756.5, 1763.0, 1764.5, 1767.0, 1773.5, 1779.5, 1781.5]\n",
    "CA_2014_rents = [1782.5, 1781.0, 1785.5, 1784.5, 1787.0, 1790.0, 1794.0, 1807.5, 1824.0, 1842.5, 1859.5, 1875.0]\n",
    "CA_2015_rents = [1885.0, 1899.0, 1907.0, 1921.5, 1935.0, 1946.0, 1957.0, 1969.0, 1977.0, 1982.0, 1995.0, 2004.0]\n",
    "CA_2016_rents = [2014.5, 2036.5, 2056.0, 2062.5, 2072.0, 2092.0, 2104.0, 2115.0, 2124.5, 2128.5, 2134.0, 2150.5]\n",
    "\n",
    "CA_2011_med = np.median(CA_2011_rents)\n",
    "CA_2012_med = np.median(CA_2012_rents)\n",
    "CA_2013_med = np.median(CA_2013_rents)\n",
    "CA_2014_med = np.median(CA_2014_rents)\n",
    "CA_2015_med = np.median(CA_2015_rents)\n",
    "CA_2016_med = np.median(CA_2016_rents)\n",
    "\n",
    "CA_yearly_rent = {\"2011\":[CA_2011_med], \"2012\" :[CA_2012_med], \"2013\" :[CA_2013_med], \"2014\" :[CA_2014_med], \"2015\" :[CA_2015_med], \"2016\" :[CA_2016_med]}\n",
    "\n",
    "CA_yearly_rent_df = pd.DataFrame(CA_yearly_rent)\n",
    "\n",
    "CA_yearly_rent_df.insert(0, \"State\", [\"CA\"])\n",
    "\n",
    "CA_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "CA_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "id": "a946f42a",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for IL by year and make df\n",
    "IL_2011_rents = [1425.0, 1426.0, 1422.5, 1421.5, 1413.5, 1406.5, 1392.5, 1382.0, 1380.0, 1370.0, 1363.5, 1355.5]\n",
    "IL_2012_rents = [1349.0, 1344.0, 1341.0, 1344.0, 1344.0, 1347.5, 1347.0, 1346.0, 1351.0, 1359.5, 1371.0, 1370.0]\n",
    "IL_2013_rents = [1364.5, 1351.5, 1345.5, 1347.0, 1354.0, 1360.0, 1363.0, 1364.5, 1372.5, 1379.0, 1385.5, 1392.0]\n",
    "IL_2014_rents = [1399.0, 1400.5, 1395.0, 1393.0, 1387.0, 1385.5, 1379.5, 1384.0, 1385.0, 1386.5, 1397.0, 1406.5]\n",
    "IL_2015_rents = [1411.5, 1408.0, 1416.5, 1414.5, 1413.0, 1413.0, 1414.5, 1414.0, 1411.0, 1403.0, 1398.5, 1396.0]\n",
    "IL_2016_rents = [1405.5, 1408.0, 1413.0, 1416.5, 1424.5, 1424.0, 1431.0, 1426.5, 1418.0, 1410.0, 1405.0, 1397.0]\n",
    "\n",
    "IL_2011_med = np.median(IL_2011_rents)\n",
    "IL_2012_med = np.median(IL_2012_rents)\n",
    "IL_2013_med = np.median(IL_2013_rents)\n",
    "IL_2014_med = np.median(IL_2014_rents)\n",
    "IL_2015_med = np.median(IL_2015_rents)\n",
    "IL_2016_med = np.median(IL_2016_rents)\n",
    "\n",
    "IL_yearly_rent = {\"2011\":[IL_2011_med], \"2012\" :[IL_2012_med], \"2013\" :[IL_2013_med], \"2014\" :[IL_2014_med], \"2015\" :[IL_2015_med], \"2016\" :[IL_2016_med]}\n",
    "\n",
    "IL_yearly_rent_df = pd.DataFrame(IL_yearly_rent)\n",
    "\n",
    "IL_yearly_rent_df.insert(0, \"State\", [\"IL\"])\n",
    "\n",
    "IL_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "IL_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "id": "a55c27ce",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for NY by year and make df\n",
    "NY_2011_rents = [1369.5, 1383.5, 1380.5, 1388.0, 1390.5, 1401.0, 1401.0, 1399.0, 1397.0, 1399.0, 1400.5, 1399.0]\n",
    "NY_2012_rents = [1391.5, 1383.0, 1376.0, 1378.0, 1396.0, 1411.0, 1428.5, 1438.0, 1437.5, 1431.0, 1417.5, 1416.0]\n",
    "NY_2013_rents = [1419.5, 1432.0, 1434.0, 1431.5, 1434.0, 1418.5, 1384.5, 1368.5, 1366.5, 1379.0, 1398.5, 1395.0]\n",
    "NY_2014_rents = [1378.5, 1360.0, 1357.5, 1351.0, 1341.0, 1342.0, 1362.5, 1382.0, 1400.5, 1410.0, 1418.5, 1430.0]\n",
    "NY_2015_rents = [1440.5, 1443.0, 1449.0, 1448.5, 1444.5, 1437.5, 1428.5, 1403.0, 1388.5, 1376.0, 1371.5, 1363.0]\n",
    "NY_2016_rents = [1368.0, 1365.0, 1374.5, 1380.0, 1385.5, 1390.5, 1401.5, 1399.0, 1394.5, 1392.5, 1389.5, 1386.5]\n",
    "\n",
    "NY_2011_med = np.median(NY_2011_rents)\n",
    "NY_2012_med = np.median(NY_2012_rents)\n",
    "NY_2013_med = np.median(NY_2013_rents)\n",
    "NY_2014_med = np.median(NY_2014_rents)\n",
    "NY_2015_med = np.median(NY_2015_rents)\n",
    "NY_2016_med = np.median(NY_2016_rents)\n",
    "\n",
    "NY_yearly_rent = {\"2011\":[NY_2011_med], \"2012\" :[NY_2012_med], \"2013\" :[NY_2013_med], \"2014\" :[NY_2014_med], \"2015\" :[NY_2015_med], \"2016\" :[NY_2016_med]}\n",
    "\n",
    "NY_yearly_rent_df = pd.DataFrame(NY_yearly_rent)\n",
    "\n",
    "NY_yearly_rent_df.insert(0, \"State\", [\"NY\"])\n",
    "\n",
    "NY_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "NY_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "id": "e64c4b08",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for US by year and make df\n",
    "US_2011_rents = [1218.0, 1219.0, 1220.0, 1220.0, 1218.0, 1217.0, 1214.0, 1213.0, 1210.0, 1207.0, 1206.0, 1205.0]\n",
    "US_2012_rents = [1204.0, 1205.0, 1207.0, 1206.0, 1205.0, 1205.0, 1205.0, 1206.0, 1208.0, 1210.0, 1215.0, 1215.0]\n",
    "US_2013_rents = [1215.0, 1216.0, 1217.0, 1217.0, 1218.0, 1221.0, 1224.0, 1225.0, 1228.0, 1231.0, 1235.0, 1236.0]\n",
    "US_2014_rents = [1236.0, 1234.0, 1232.0, 1229.0, 1227.0, 1223.0, 1226.0, 1232.0, 1245.0, 1253.0, 1259.0, 1263.0]\n",
    "US_2015_rents = [1269.0, 1272.0, 1276.0, 1280.0, 1284.0, 1289.0, 1295.0, 1299.0, 1298.0, 1294.0, 1293.0, 1292.0]\n",
    "US_2016_rents = [1294.0, 1298.0, 1303.0, 1308.0, 1312.0, 1313.0, 1311.0, 1306.0, 1305.0, 1305.0, 1307.0, 1308.0]\n",
    "\n",
    "US_2011_med = np.median(US_2011_rents)\n",
    "US_2012_med = np.median(US_2012_rents)\n",
    "US_2013_med = np.median(US_2013_rents)\n",
    "US_2014_med = np.median(US_2014_rents)\n",
    "US_2015_med = np.median(US_2015_rents)\n",
    "US_2016_med = np.median(US_2016_rents)\n",
    "\n",
    "US_yearly_rent = {\"2011\":[US_2011_med], \"2012\" :[US_2012_med], \"2013\" :[US_2013_med], \"2014\" :[US_2014_med], \"2015\" :[US_2015_med], \"2016\" :[US_2016_med]}\n",
    "\n",
    "US_yearly_rent_df = pd.DataFrame(US_yearly_rent)\n",
    "\n",
    "US_yearly_rent_df.insert(0, \"State\", [\"US\"])\n",
    "\n",
    "US_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "US_yearly_rent_df.head(10)\n",
    "\n",
    "#ayear = [2011,2012,2013,2014,2015,2016]\n",
    "#rent_cost = [US_2011_med,US_2012_med,US_2013_med,US_2014_med,US_2015_med,US_2016_med]\n",
    "#correlation = st.pearsonr(rent_cost,year)\n",
    "#print(f\"The correlation between both factors is {round(correlation[0],2)}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "id": "52b5fc0a",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Combined yearly rents in to one df\n",
    "TX_CA_yearly_rent_df = pd.concat([TX_yearly_rent_df, CA_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "TX_CA_yearly_rent_df\n",
    "\n",
    "IL_NY_yearly_rent_df = pd.concat([IL_yearly_rent_df, NY_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "IL_NY_yearly_rent_df\n",
    "\n",
    "states_yearly_rent_df = pd.concat([TX_CA_yearly_rent_df, IL_NY_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "states_yearly_rent_df\n",
    "\n",
    "ALL_yearly_rent_df = pd.concat([states_yearly_rent_df, US_yearly_rent_df], axis=0, ignore_index = True)\n",
    "#0 = TX, 1 = CA, 2 = IL, 3 = NY\n",
    "\n",
    "ALL_yearly_rent_df.insert(0, \"State\", ['TX', 'CA', 'IL', 'NY', 'US'])\n",
    "\n",
    "ALL_yearly_rent_df.set_index(['State'], drop=True, append=False, inplace=True, verify_integrity=False)\n",
    "#ALL_yearly_rent_df.reset_index()\n",
    "\n",
    "ALL_yearly_rent_df['Rent Change (%)'] = ((ALL_yearly_rent_df[['2011', '2016']].pct_change(axis=1)['2016'])* 100).round(2)\n",
    "\n",
    "ALL_yearly_rent_df.head(30)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "id": "b0d9130e",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Line graph of median US Rent change from 2011-2016\n",
    "#Used https://stackoverflow.com/questions/1347791/unicode-error-unicodeescape-codec-cant-decode-bytes-cannot-open-text-file\n",
    "#To help with unicode error when trying to save plot\n",
    "\n",
    "years = [\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]\n",
    "\n",
    "US_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"US\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"US\", color=\"purple\") \n",
    "\n",
    "plt.xlabel(\"Year\")\n",
    "plt.ylabel(\"Cost of Rent (USD)\")\n",
    "plt.title(\"US Median Rent 2011-2016\")\n",
    "\n",
    "plt.savefig('Visualizations Outputs\\\\US_Rent_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 31,
   "id": "627825d3",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Line graph showing all 4 states median rent prices throughout timeframe 2011-2016\n",
    "\n",
    "years = [\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\"]\n",
    "\n",
    "TX_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"TX\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"Texas\", color=\"blue\") \n",
    "\n",
    "CA_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"CA\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"California\", color=\"orange\") \n",
    "\n",
    "IL_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"IL\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"Illinois\", color=\"green\") \n",
    "\n",
    "NY_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"NY\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"New York\", color=\"red\") \n",
    "\n",
    "US_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"US\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"US\", color=\"purple\") \n",
    "\n",
    "legend_list = [\"TX\", \"CA\", \"IL\", \"NY\", \"US\"]\n",
    "plt.legend([\"TX\", \"CA\", \"IL\", \"NY\", \"US\"], loc=\"best\")\n",
    "\n",
    "\n",
    "plt.xlabel(\"Year\")\n",
    "plt.ylabel(\"Cost of Rent (USD)\")\n",
    "plt.title(\"US, TX, CA, IL, NY Median Rent Prices 2011-2016\")\n",
    "plt.savefig('Visualizations Outputs\\All_Rent_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 32,
   "id": "3b67e2a8",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Bar graph showing the change in rent (%)\n",
    "rent_change_bar = ALL_yearly_rent_df['Rent Change (%)'].plot(kind=\"bar\", color=[\"blue\", \"orange\", \"green\", \"red\", \"purple\"], figsize=(8,6),\n",
    "                                   title=\"Rent Change by State (%)\",\n",
    "                                   xlabel=\"State\",\n",
    "                                   ylabel=\"Percent of Change\")\n",
    "rent_change_bar.axhline(y=0, color= 'black', linewidth=1,)\n",
    "\n",
    "plt.savefig('Visualizations Outputs\\Change_Rent_graph.png')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 33,
   "id": "c1384a06",
   "metadata": {},
   "outputs": [],
   "source": [
    "year = [2011,2011, 2011, 2011, 2012, 2012, 2012, 2012, 2013, 2013, 2013, 2013, 2014, 2014, 2014, 2014, 2015, 2015, 2015, 2015, 2016, 2016, 2016, 2016]\n",
    "rent_cost = [1182.50,1717.75,1399.50,1398.00, 1166.50,1701.50,1347.25,1413.50,1200.50,1759.75,1363.75,1408.50,1224.5,1792.0,1390.0,1370.5,1310.50,1951.50,1412.25,1433.00,1336.00,2098.00,1414.75,1388.00]\n",
    "correlation = st.pearsonr(rent_cost,year)\n",
    "print(f\"The correlation between both factors is {round(correlation[0],2)}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 34,
   "id": "16c63c03",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Box plot for data\n",
    "\n",
    "rents_data = pd.DataFrame({\"TX\": [1182.50,1166.50,1200.50,1224.5,1310.50,1336.00], \"CA\": [1717.75,1701.50,1759.75,1792.0,1951.50,2098.00], \n",
    "\"IL\": [1399.50,1347.25,1363.75,1390.0,1412.25,1414.75], \"NY\": [1398.00,1413.50,1408.50,1370.5,1433.00,1388.00], \"US\": [1215.5,1206.0,1222.5,1233.0,1290.5,1306.5]})\n",
    "\n",
    "# Plot the dataframe\n",
    "ax = rents_data[['TX', 'CA', 'IL', 'NY', 'US']].plot(kind='box', title='Boxplot for USA, TX, CA, IL, NY')\n",
    "\n",
    "# Display the plot\n",
    "plt.savefig('Visualizations Outputs\\Boxplot_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 35,
   "id": "c58b2144",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Histogram\n",
    "labels = []\n",
    "for state in ALL_yearly_rent_df_t.columns:\n",
    "    plt.hist(ALL_yearly_rent_df_t[state]) \n",
    "    labels.append(state)\n",
    "\n",
    "    plt.xlabel('Rent Values')\n",
    "    plt.ylabel('Frequency')\n",
    "    plt.title('Histogram of Rent')\n",
    "    \n",
    "plt.legend(labels)\n",
    "plt.savefig('Visualizations Outputs\\Histogram.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 36,
   "id": "4904fadb",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Histogram\n",
    "labels = []\n",
    "for state in ALL_yearly_rent_df_t.columns:\n",
    "    plt.hist(ALL_yearly_rent_df_t[state]) \n",
    "    labels.append(state)\n",
    "\n",
    "    plt.xlabel('Rent Values')\n",
    "    plt.ylabel('Frequency')\n",
    "    plt.title('Histogram of Rent')\n",
    "    \n",
    "plt.legend(labels)\n",
    "plt.savefig('Visualizations Outputs\\Histogram.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 37,
   "id": "1cbb64c5",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Dependencies and Set Up\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "import matplotlib.pyplot as plt\n",
    "import scipy.stats as st\n",
    "from scipy.stats import linregress\n",
    "import seaborn as sns  # For heatmap visualization\n",
    "from sklearn.preprocessing import StandardScaler"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 38,
   "id": "45410d3c",
   "metadata": {},
   "outputs": [],
   "source": [
    "%notebook widget"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 39,
   "id": "a62f757c",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Created a path to the file making it into a dataframe\n",
    "rent_file = pd.read_csv(\"Raw_Price_Data//price.csv\")\n",
    "\n",
    "rent_df = pd.DataFrame(rent_file)\n",
    "\n",
    "rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 40,
   "id": "daa5859d",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Identified what columns are missing data\n",
    "clean_rent_df = rent_df.dropna(how = 'any')\n",
    "\n",
    "clean_rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 41,
   "id": "08f1dc72",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Extracted states from data (CA, IL, NY, TX)\n",
    "four_states = [\"NY\", \"CA\", \"IL\", \"TX\"]\n",
    "\n",
    "four_states_df = rent_df[rent_df['State'].isin(four_states)]\n",
    "\n",
    "four_states_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 42,
   "id": "c745499a",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Dropped all NaN values\n",
    "rent_df.dropna(inplace = True)\n",
    "\n",
    "#Display the DataFrame\n",
    "rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 43,
   "id": "cb0c8793",
   "metadata": {},
   "outputs": [],
   "source": [
    "#New York Data Frame\n",
    "NY_state = [\"NY\"]\n",
    "\n",
    "NY_state_df = rent_df[rent_df['State'].isin(NY_state)]\n",
    "\n",
    "NY_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 44,
   "id": "183c0bf6",
   "metadata": {},
   "outputs": [],
   "source": [
    "#California Data Frame\n",
    "CA_state = [\"CA\"]\n",
    "\n",
    "CA_state_df = rent_df[rent_df['State'].isin(CA_state)]\n",
    "\n",
    "CA_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 45,
   "id": "ccedf07b",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Illinois Data Frame\n",
    "IL_state = [\"IL\"]\n",
    "\n",
    "IL_state_df = rent_df[rent_df['State'].isin(IL_state)]\n",
    "\n",
    "IL_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 46,
   "id": "a43beb78",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Texas Data Frame\n",
    "TX_state = [\"TX\"]\n",
    "\n",
    "TX_state_df = rent_df[rent_df['State'].isin(TX_state)]\n",
    "\n",
    "TX_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 47,
   "id": "336caf9e",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Made all of the columns into a list\n",
    "columns_list = ['January 2011',\n",
    "'February 2011','March 2011','April 2011','May 2011','June 2011','July 2011',\n",
    "'August 2011','September 2011','October 2011','November 2011','December 2011',\n",
    "'January 2012','February 2012','March 2012','April 2012','May 2012','June 2012',\n",
    "'July 2012','August 2012','September 2012','October 2012','November 2012','December 2012',\n",
    "'January 2013','February 2013','March 2013','April 2013','May 2013','June 2013','July 2013',\n",
    "'August 2013','September 2013','October 2013','November 2013','December 2013','January 2014',\n",
    "'February 2014','March 2014','April 2014','May 2014','June 2014','July 2014','August 2014',\n",
    "'September 2014','October 2014','November 2014','December 2014','January 2015','February 2015',\n",
    "'March 2015','April 2015','May 2015','June 2015','July 2015','August 2015','September 2015','October 2015',\n",
    "'November 2015','December 2015','January 2016','February 2016','March 2016','April 2016','May 2016',\n",
    "'June 2016','July 2016','August 2016','September 2016','October 2016','November 2016','December 2016']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 48,
   "id": "32b26213",
   "metadata": {},
   "outputs": [],
   "source": [
    "# US median rent prices\n",
    "US_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    US_med_rent = np.median(clean_rent_df[i])\n",
    "\n",
    "    US_med_list.append(US_med_rent)\n",
    "\n",
    "print(US_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 49,
   "id": "46075893",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put US med rent prices for each month and year into a DF\n",
    "US_med_df = pd.DataFrame(US_med_list, columns_list).T \n",
    "\n",
    "US_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 50,
   "id": "3bede738",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in IL\n",
    "IL_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    IL_med_rent = np.median(IL_state_df[i])\n",
    "\n",
    "    IL_med_list.append(IL_med_rent)\n",
    "\n",
    "print(IL_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 51,
   "id": "228946dd",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put IL med rent prices for each month and year into a DF\n",
    "IL_med_df = pd.DataFrame(IL_med_list, columns_list).T \n",
    "\n",
    "IL_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 52,
   "id": "0c911dc5",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in CA\n",
    "CA_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    CA_med_rent = np.median(CA_state_df[i])\n",
    "\n",
    "    CA_med_list.append(CA_med_rent)\n",
    "\n",
    "print(CA_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 53,
   "id": "f24bbc4c",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put CA med rent prices for each month and year into a DF\n",
    "CA_med_df = pd.DataFrame(CA_med_list, columns_list).T \n",
    "\n",
    "CA_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 54,
   "id": "09292474",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in TX\n",
    "TX_med_list=[]\n",
    "for i in columns_list:\n",
    "\n",
    "    TX_med_rent = np.median(TX_state_df[i])\n",
    "\n",
    "    TX_med_list.append(TX_med_rent)\n",
    "\n",
    "print(TX_med_list)  \n",
    "\n",
    "   "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 55,
   "id": "4470662f",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put TX med rent prices for each month and year into a DF\n",
    "TX_med_df = pd.DataFrame(TX_med_list, columns_list).T \n",
    "\n",
    "TX_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 56,
   "id": "1f51fd2c",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in NY\n",
    "NY_med_list=[]\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    NY_med_rent = np.median(NY_state_df[i])\n",
    "    NY_med_list.append(NY_med_rent)\n",
    "\n",
    "print(NY_med_list)  "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 57,
   "id": "107350ca",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Put NY med rent prices for each month and year into a DF\n",
    "NY_med_df = pd.DataFrame(NY_med_list, columns_list).T \n",
    "\n",
    "NY_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 58,
   "id": "2af3500a",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Combined Median rent data for 4 states\n",
    "TX_CA_df = pd.concat([TX_med_df, CA_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "IL_NY_df = pd.concat([IL_med_df, NY_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "states_med_rent = pd.concat([TX_CA_df, IL_NY_df], axis=0, ignore_index=True)\n",
    "\n",
    "#0 = TX, 1 = CA, 2 = IL, 3 = NY\n",
    "states_med_rent.insert(0, \"States\", [\"TX\", \"CA\", \"IL\", \"NY\"])\n",
    "\n",
    "states_med_rent.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 59,
   "id": "be53b0b2",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Created a table with US Med in it\n",
    "\n",
    "ALL_med_rent = pd.concat([states_med_rent, US_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "#ALL_med_rent.reset_index(drop=True)\n",
    "#ALL_med_rent.set_index('State', inplace=True, drop=True)\n",
    "#ALL_med_rent[ALL_med_rent.index[-1]] = \"US\"\n",
    "ALL_med_rent.insert(0, \"State\", [\"TX\", \"CA\", \"IL\", \"NY\", \"US\"])\n",
    "\n",
    "ALL_med_rent.drop([\"States\"], axis = 1, inplace=True)\n",
    "ALL_med_rent.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 60,
   "id": "61751666",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for TX by year and make df\n",
    "TX_2011_rents = [1194.0, 1189.0, 1186.0, 1183.0, 1182.0, 1189.0, 1184.0, 1179.0, 1181.0, 1174.0, 1173.0, 1167.0]\n",
    "TX_2012_rents = [1164.0, 1162.0, 1165.0, 1159.0, 1155.0, 1158.0, 1168.0, 1172.0, 1177.0, 1179.0, 1173.0, 1171.0]\n",
    "TX_2013_rents = [1175.0, 1174.0, 1181.0, 1196.0, 1202.0, 1200.0, 1197.0, 1201.0, 1205.0, 1208.0, 1212.0, 1221.0]\n",
    "TX_2014_rents = [1224.0, 1224.0, 1222.0, 1225.0, 1221.0, 1218.0, 1221.0, 1234.0, 1245.0, 1256.0, 1272.0, 1275.0]\n",
    "TX_2015_rents = [1282.0, 1287.0, 1289.0, 1297.0, 1300.0, 1309.0, 1313.0, 1319.0, 1323.0, 1325.0, 1320.0, 1312.0]\n",
    "TX_2016_rents = [1313.0, 1319.0, 1326.0, 1325.0, 1338.0, 1346.0, 1350.0, 1343.0, 1340.0, 1335.0, 1335.0, 1337.0]\n",
    "\n",
    "\n",
    "TX_2011_med = np.median(TX_2011_rents)\n",
    "TX_2012_med = np.median(TX_2012_rents)\n",
    "TX_2013_med = np.median(TX_2013_rents)\n",
    "TX_2014_med = np.median(TX_2014_rents)\n",
    "TX_2015_med = np.median(TX_2015_rents)\n",
    "TX_2016_med = np.median(TX_2016_rents)\n",
    "\n",
    "TX_yearly_rent = {\"2011\":[TX_2011_med], \"2012\" :[TX_2012_med], \"2013\" :[TX_2013_med], \"2014\" :[TX_2014_med], \"2015\" :[TX_2015_med], \"2016\" :[TX_2016_med]}\n",
    "\n",
    "TX_yearly_rent_df = pd.DataFrame(TX_yearly_rent)\n",
    "\n",
    "TX_yearly_rent_df.insert(0, \"State\", [\"TX\"])\n",
    "\n",
    "TX_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "TX_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 61,
   "id": "08f79c11",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for CA by year and make df\n",
    "CA_2011_rents = [1770.0, 1754.0, 1738.5, 1729.0, 1716.5, 1717.5, 1719.5, 1718.0, 1712.5, 1710.5, 1710.0, 1705.0]\n",
    "CA_2012_rents = [1702.5, 1695.5, 1696.5, 1697.0, 1700.5, 1713.5, 1710.5, 1709.0, 1702.0, 1704.5, 1700.0, 1701.0]\n",
    "CA_2013_rents = [1707.5, 1718.5, 1728.0, 1735.0, 1743.0, 1756.5, 1763.0, 1764.5, 1767.0, 1773.5, 1779.5, 1781.5]\n",
    "CA_2014_rents = [1782.5, 1781.0, 1785.5, 1784.5, 1787.0, 1790.0, 1794.0, 1807.5, 1824.0, 1842.5, 1859.5, 1875.0]\n",
    "CA_2015_rents = [1885.0, 1899.0, 1907.0, 1921.5, 1935.0, 1946.0, 1957.0, 1969.0, 1977.0, 1982.0, 1995.0, 2004.0]\n",
    "CA_2016_rents = [2014.5, 2036.5, 2056.0, 2062.5, 2072.0, 2092.0, 2104.0, 2115.0, 2124.5, 2128.5, 2134.0, 2150.5]\n",
    "\n",
    "CA_2011_med = np.median(CA_2011_rents)\n",
    "CA_2012_med = np.median(CA_2012_rents)\n",
    "CA_2013_med = np.median(CA_2013_rents)\n",
    "CA_2014_med = np.median(CA_2014_rents)\n",
    "CA_2015_med = np.median(CA_2015_rents)\n",
    "CA_2016_med = np.median(CA_2016_rents)\n",
    "\n",
    "CA_yearly_rent = {\"2011\":[CA_2011_med], \"2012\" :[CA_2012_med], \"2013\" :[CA_2013_med], \"2014\" :[CA_2014_med], \"2015\" :[CA_2015_med], \"2016\" :[CA_2016_med]}\n",
    "\n",
    "CA_yearly_rent_df = pd.DataFrame(CA_yearly_rent)\n",
    "\n",
    "CA_yearly_rent_df.insert(0, \"State\", [\"CA\"])\n",
    "\n",
    "CA_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "CA_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 62,
   "id": "edc49efd",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for IL by year and make df\n",
    "IL_2011_rents = [1425.0, 1426.0, 1422.5, 1421.5, 1413.5, 1406.5, 1392.5, 1382.0, 1380.0, 1370.0, 1363.5, 1355.5]\n",
    "IL_2012_rents = [1349.0, 1344.0, 1341.0, 1344.0, 1344.0, 1347.5, 1347.0, 1346.0, 1351.0, 1359.5, 1371.0, 1370.0]\n",
    "IL_2013_rents = [1364.5, 1351.5, 1345.5, 1347.0, 1354.0, 1360.0, 1363.0, 1364.5, 1372.5, 1379.0, 1385.5, 1392.0]\n",
    "IL_2014_rents = [1399.0, 1400.5, 1395.0, 1393.0, 1387.0, 1385.5, 1379.5, 1384.0, 1385.0, 1386.5, 1397.0, 1406.5]\n",
    "IL_2015_rents = [1411.5, 1408.0, 1416.5, 1414.5, 1413.0, 1413.0, 1414.5, 1414.0, 1411.0, 1403.0, 1398.5, 1396.0]\n",
    "IL_2016_rents = [1405.5, 1408.0, 1413.0, 1416.5, 1424.5, 1424.0, 1431.0, 1426.5, 1418.0, 1410.0, 1405.0, 1397.0]\n",
    "\n",
    "IL_2011_med = np.median(IL_2011_rents)\n",
    "IL_2012_med = np.median(IL_2012_rents)\n",
    "IL_2013_med = np.median(IL_2013_rents)\n",
    "IL_2014_med = np.median(IL_2014_rents)\n",
    "IL_2015_med = np.median(IL_2015_rents)\n",
    "IL_2016_med = np.median(IL_2016_rents)\n",
    "\n",
    "IL_yearly_rent = {\"2011\":[IL_2011_med], \"2012\" :[IL_2012_med], \"2013\" :[IL_2013_med], \"2014\" :[IL_2014_med], \"2015\" :[IL_2015_med], \"2016\" :[IL_2016_med]}\n",
    "\n",
    "IL_yearly_rent_df = pd.DataFrame(IL_yearly_rent)\n",
    "\n",
    "IL_yearly_rent_df.insert(0, \"State\", [\"IL\"])\n",
    "\n",
    "IL_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "IL_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 63,
   "id": "5cdbc6a6",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for NY by year and make df\n",
    "NY_2011_rents = [1369.5, 1383.5, 1380.5, 1388.0, 1390.5, 1401.0, 1401.0, 1399.0, 1397.0, 1399.0, 1400.5, 1399.0]\n",
    "NY_2012_rents = [1391.5, 1383.0, 1376.0, 1378.0, 1396.0, 1411.0, 1428.5, 1438.0, 1437.5, 1431.0, 1417.5, 1416.0]\n",
    "NY_2013_rents = [1419.5, 1432.0, 1434.0, 1431.5, 1434.0, 1418.5, 1384.5, 1368.5, 1366.5, 1379.0, 1398.5, 1395.0]\n",
    "NY_2014_rents = [1378.5, 1360.0, 1357.5, 1351.0, 1341.0, 1342.0, 1362.5, 1382.0, 1400.5, 1410.0, 1418.5, 1430.0]\n",
    "NY_2015_rents = [1440.5, 1443.0, 1449.0, 1448.5, 1444.5, 1437.5, 1428.5, 1403.0, 1388.5, 1376.0, 1371.5, 1363.0]\n",
    "NY_2016_rents = [1368.0, 1365.0, 1374.5, 1380.0, 1385.5, 1390.5, 1401.5, 1399.0, 1394.5, 1392.5, 1389.5, 1386.5]\n",
    "\n",
    "NY_2011_med = np.median(NY_2011_rents)\n",
    "NY_2012_med = np.median(NY_2012_rents)\n",
    "NY_2013_med = np.median(NY_2013_rents)\n",
    "NY_2014_med = np.median(NY_2014_rents)\n",
    "NY_2015_med = np.median(NY_2015_rents)\n",
    "NY_2016_med = np.median(NY_2016_rents)\n",
    "\n",
    "NY_yearly_rent = {\"2011\":[NY_2011_med], \"2012\" :[NY_2012_med], \"2013\" :[NY_2013_med], \"2014\" :[NY_2014_med], \"2015\" :[NY_2015_med], \"2016\" :[NY_2016_med]}\n",
    "\n",
    "NY_yearly_rent_df = pd.DataFrame(NY_yearly_rent)\n",
    "\n",
    "NY_yearly_rent_df.insert(0, \"State\", [\"NY\"])\n",
    "\n",
    "NY_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "NY_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 64,
   "id": "eec75368",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for US by year and make df\n",
    "US_2011_rents = [1218.0, 1219.0, 1220.0, 1220.0, 1218.0, 1217.0, 1214.0, 1213.0, 1210.0, 1207.0, 1206.0, 1205.0]\n",
    "US_2012_rents = [1204.0, 1205.0, 1207.0, 1206.0, 1205.0, 1205.0, 1205.0, 1206.0, 1208.0, 1210.0, 1215.0, 1215.0]\n",
    "US_2013_rents = [1215.0, 1216.0, 1217.0, 1217.0, 1218.0, 1221.0, 1224.0, 1225.0, 1228.0, 1231.0, 1235.0, 1236.0]\n",
    "US_2014_rents = [1236.0, 1234.0, 1232.0, 1229.0, 1227.0, 1223.0, 1226.0, 1232.0, 1245.0, 1253.0, 1259.0, 1263.0]\n",
    "US_2015_rents = [1269.0, 1272.0, 1276.0, 1280.0, 1284.0, 1289.0, 1295.0, 1299.0, 1298.0, 1294.0, 1293.0, 1292.0]\n",
    "US_2016_rents = [1294.0, 1298.0, 1303.0, 1308.0, 1312.0, 1313.0, 1311.0, 1306.0, 1305.0, 1305.0, 1307.0, 1308.0]\n",
    "\n",
    "US_2011_med = np.median(US_2011_rents)\n",
    "US_2012_med = np.median(US_2012_rents)\n",
    "US_2013_med = np.median(US_2013_rents)\n",
    "US_2014_med = np.median(US_2014_rents)\n",
    "US_2015_med = np.median(US_2015_rents)\n",
    "US_2016_med = np.median(US_2016_rents)\n",
    "\n",
    "US_yearly_rent = {\"2011\":[US_2011_med], \"2012\" :[US_2012_med], \"2013\" :[US_2013_med], \"2014\" :[US_2014_med], \"2015\" :[US_2015_med], \"2016\" :[US_2016_med]}\n",
    "\n",
    "US_yearly_rent_df = pd.DataFrame(US_yearly_rent)\n",
    "\n",
    "US_yearly_rent_df.insert(0, \"State\", [\"US\"])\n",
    "\n",
    "US_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "US_yearly_rent_df.head(10)\n",
    "\n",
    "#ayear = [2011,2012,2013,2014,2015,2016]\n",
    "#rent_cost = [US_2011_med,US_2012_med,US_2013_med,US_2014_med,US_2015_med,US_2016_med]\n",
    "#correlation = st.pearsonr(rent_cost,year)\n",
    "#print(f\"The correlation between both factors is {round(correlation[0],2)}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 65,
   "id": "c744bd89",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Combined yearly rents in to one df\n",
    "TX_CA_yearly_rent_df = pd.concat([TX_yearly_rent_df, CA_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "TX_CA_yearly_rent_df\n",
    "\n",
    "IL_NY_yearly_rent_df = pd.concat([IL_yearly_rent_df, NY_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "IL_NY_yearly_rent_df\n",
    "\n",
    "states_yearly_rent_df = pd.concat([TX_CA_yearly_rent_df, IL_NY_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "states_yearly_rent_df\n",
    "\n",
    "ALL_yearly_rent_df = pd.concat([states_yearly_rent_df, US_yearly_rent_df], axis=0, ignore_index = True)\n",
    "#0 = TX, 1 = CA, 2 = IL, 3 = NY\n",
    "\n",
    "ALL_yearly_rent_df.insert(0, \"State\", ['TX', 'CA', 'IL', 'NY', 'US'])\n",
    "\n",
    "ALL_yearly_rent_df.set_index(['State'], drop=True, append=False, inplace=True, verify_integrity=False)\n",
    "#ALL_yearly_rent_df.reset_index()\n",
    "\n",
    "ALL_yearly_rent_df['Rent Change (%)'] = ((ALL_yearly_rent_df[['2011', '2016']].pct_change(axis=1)['2016'])* 100).round(2)\n",
    "\n",
    "ALL_yearly_rent_df.head(30)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 66,
   "id": "b928b715",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Line graph of median US Rent change from 2011-2016\n",
    "#Used https://stackoverflow.com/questions/1347791/unicode-error-unicodeescape-codec-cant-decode-bytes-cannot-open-text-file\n",
    "#To help with unicode error when trying to save plot\n",
    "\n",
    "years = [\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]\n",
    "\n",
    "US_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"US\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"US\", color=\"purple\") \n",
    "\n",
    "plt.xlabel(\"Year\")\n",
    "plt.ylabel(\"Cost of Rent (USD)\")\n",
    "plt.title(\"US Median Rent 2011-2016\")\n",
    "\n",
    "plt.savefig('Visualizations Outputs\\\\US_Rent_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 67,
   "id": "f94a69e7",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Line graph showing all 4 states median rent prices throughout timeframe 2011-2016\n",
    "\n",
    "years = [\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\"]\n",
    "\n",
    "TX_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"TX\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"Texas\", color=\"blue\") \n",
    "\n",
    "CA_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"CA\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"California\", color=\"orange\") \n",
    "\n",
    "IL_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"IL\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"Illinois\", color=\"green\") \n",
    "\n",
    "NY_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"NY\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"New York\", color=\"red\") \n",
    "\n",
    "US_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"US\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"US\", color=\"purple\") \n",
    "\n",
    "legend_list = [\"TX\", \"CA\", \"IL\", \"NY\", \"US\"]\n",
    "plt.legend([\"TX\", \"CA\", \"IL\", \"NY\", \"US\"], loc=\"best\")\n",
    "\n",
    "\n",
    "plt.xlabel(\"Year\")\n",
    "plt.ylabel(\"Cost of Rent (USD)\")\n",
    "plt.title(\"US, TX, CA, IL, NY Median Rent Prices 2011-2016\")\n",
    "plt.savefig('Visualizations Outputs\\All_Rent_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 68,
   "id": "6a6db61c",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Bar graph showing the change in rent (%)\n",
    "rent_change_bar = ALL_yearly_rent_df['Rent Change (%)'].plot(kind=\"bar\", color=[\"blue\", \"orange\", \"green\", \"red\", \"purple\"], figsize=(8,6),\n",
    "                                   title=\"Rent Change by State (%)\",\n",
    "                                   xlabel=\"State\",\n",
    "                                   ylabel=\"Percent of Change\")\n",
    "rent_change_bar.axhline(y=0, color= 'black', linewidth=1,)\n",
    "\n",
    "plt.savefig('Visualizations Outputs\\Change_Rent_graph.png')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 69,
   "id": "480715c3",
   "metadata": {},
   "outputs": [],
   "source": [
    "year = [2011,2011, 2011, 2011, 2012, 2012, 2012, 2012, 2013, 2013, 2013, 2013, 2014, 2014, 2014, 2014, 2015, 2015, 2015, 2015, 2016, 2016, 2016, 2016]\n",
    "rent_cost = [1182.50,1717.75,1399.50,1398.00, 1166.50,1701.50,1347.25,1413.50,1200.50,1759.75,1363.75,1408.50,1224.5,1792.0,1390.0,1370.5,1310.50,1951.50,1412.25,1433.00,1336.00,2098.00,1414.75,1388.00]\n",
    "correlation = st.pearsonr(rent_cost,year)\n",
    "print(f\"The correlation between both factors is {round(correlation[0],2)}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 70,
   "id": "44d16dae",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Box plot for data\n",
    "\n",
    "rents_data = pd.DataFrame({\"TX\": [1182.50,1166.50,1200.50,1224.5,1310.50,1336.00], \"CA\": [1717.75,1701.50,1759.75,1792.0,1951.50,2098.00], \n",
    "\"IL\": [1399.50,1347.25,1363.75,1390.0,1412.25,1414.75], \"NY\": [1398.00,1413.50,1408.50,1370.5,1433.00,1388.00], \"US\": [1215.5,1206.0,1222.5,1233.0,1290.5,1306.5]})\n",
    "\n",
    "# Plot the dataframe\n",
    "ax = rents_data[['TX', 'CA', 'IL', 'NY', 'US']].plot(kind='box', title='Boxplot for USA, TX, CA, IL, NY')\n",
    "\n",
    "# Display the plot\n",
    "plt.savefig('Visualizations Outputs\\Boxplot_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 71,
   "id": "8962ccf2",
   "metadata": {},
   "outputs": [],
   "source": [
    "# #Histogram\n",
    "# labels = []\n",
    "# for state in ALL_yearly_rent_df_t.columns:\n",
    "#     plt.hist(ALL_yearly_rent_df_t[state]) \n",
    "#     labels.append(state)\n",
    "\n",
    "#     plt.xlabel('Rent Values')\n",
    "#     plt.ylabel('Frequency')\n",
    "#     plt.title('Histogram of Rent')\n",
    "    \n",
    "# plt.legend(labels)\n",
    "# plt.savefig('Visualizations Outputs\\Histogram.png')\n",
    "# plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 72,
   "id": "c98bca78",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Scatterplot to show USA median rent data over time\n",
    "#Used https://stackabuse.com/change-tick-frequency-in-matplotlib/\n",
    "#to help with spacing out x ticks\n",
    "USAdata={\n",
    "    \"Dates\":columns_list,\n",
    "    \"Prices\":US_med_list\n",
    "}\n",
    "\n",
    "USAdf=pd.DataFrame(USAdata)\n",
    "\n",
    "USAdf.plot(x ='Dates', y ='Prices', kind='scatter')\n",
    "plt.title(\"USA Median Rent Scatter 2011-2016\")\n",
    "plt.xlabel(\"Mos/Year\")\n",
    "plt.xticks(np.arange(0, len(columns_list), 5),rotation=60)\n",
    "plt.ylabel(\"Rent Cost ($)\")\n",
    "plt.savefig('Visualizations Outputs\\\\USA_Scatter.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 73,
   "id": "e6b4385a",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Scatterplot to show IL median rent data over time\n",
    "#Used https://stackabuse.com/change-tick-frequency-in-matplotlib/\n",
    "#to help with spacing out x ticks\n",
    "illinoisdata={\n",
    "    \"Dates\":columns_list,\n",
    "    \"Prices\":IL_med_list\n",
    "}\n",
    "\n",
    "illinoisdf=pd.DataFrame(illinoisdata)\n",
    "\n",
    "illinoisdf.plot(x ='Dates', y ='Prices', kind='scatter')\n",
    "plt.title(\"Illinois Median Rent Scatter 2011-2016\")\n",
    "plt.xlabel(\"Mos/Year\")\n",
    "plt.xticks(np.arange(0, len(columns_list), 5),rotation=60)\n",
    "plt.ylabel(\"Rent Cost ($)\")\n",
    "plt.savefig('Visualizations Outputs\\IL_Scatter.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 74,
   "id": "64dd3e7b",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Scatterplot to show CA median rent data overtime\n",
    "#Used https://stackabuse.com/change-tick-frequency-in-matplotlib/\n",
    "#to help with spacing out x ticks\n",
    "californiadata={\n",
    "    \"Dates\":columns_list,\n",
    "    \"Prices\":CA_med_list\n",
    "}\n",
    "\n",
    "californiadf=pd.DataFrame(californiadata)\n",
    "\n",
    "californiadf.plot(x ='Dates', y ='Prices', kind='scatter')\n",
    "plt.title(\"California Median Rent Scatter 2011-2016\")\n",
    "plt.xlabel(\"Mos/Year\")\n",
    "plt.xticks(np.arange(0, len(columns_list), 5),rotation=60)\n",
    "plt.ylabel(\"Rent Cost ($)\")\n",
    "plt.savefig('Visualizations Outputs\\CA_Scatter.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 75,
   "id": "5f246861",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Scatterplot to show NY median rent data overtime\n",
    "#Used https://stackoverflow.com/questions/1347791/unicode-error-unicodeescape-codec-cant-decode-bytes-cannot-open-text-file\n",
    "#To help with unicode error when trying to save plot\n",
    "#Used https://stackabuse.com/change-tick-frequency-in-matplotlib/\n",
    "#to help with spacing out x ticks\n",
    "\n",
    "newyorkdata={\n",
    "    \"Dates\":columns_list,\n",
    "    \"Prices\":NY_med_list\n",
    "}\n",
    "\n",
    "newyorkdf=pd.DataFrame(newyorkdata)\n",
    "# texasdf.head()\n",
    "\n",
    "newyorkdf.plot(x ='Dates', y ='Prices', kind='scatter')\n",
    "# plt.grid(True)\n",
    "plt.title(\"New York Median Rent Scatter 2011-2016\")\n",
    "plt.xlabel(\"Mos/Year\")\n",
    "plt.xticks(np.arange(0, len(columns_list), 5),rotation=60)\n",
    "plt.ylabel(\"Rent Cost ($)\")\n",
    "plt.savefig('Visualizations Outputs\\\\NY_Scatter.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 76,
   "id": "f272b976",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Scatterplot to show Texas median rent data overtime\n",
    "#Used https://stackabuse.com/change-tick-frequency-in-matplotlib/\n",
    "#to help with spacing out x ticks\n",
    "texasdata={\n",
    "    \"Dates\":columns_list,\n",
    "    \"Prices\":TX_med_list\n",
    "}\n",
    "\n",
    "texasdf=pd.DataFrame(texasdata)\n",
    "\n",
    "texasdf.plot(x ='Dates', y ='Prices', kind='scatter')\n",
    "# plt.grid(True)\n",
    "plt.title(\"Texas Median Rent Scatter 2011-2016\")\n",
    "plt.xlabel(\"Mos/Year\")\n",
    "plt.xticks(np.arange(0, len(columns_list), 5),rotation=60)\n",
    "plt.ylabel(\"Rent Cost ($)\")\n",
    "plt.savefig('Visualizations Outputs\\TX_Scatter.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 77,
   "id": "2b1eeb0b",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Using Chi Square Test for change in rent\n",
    "CA_obs = pd.Series([1717.75,1701.50,1759.75,1792.0,1951.50,2098.00], index=[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\"])\n",
    "#[1215.5,1206.0,1222.5,1233.0,1290.5,1306.5]\n",
    "\n",
    "CA_Chi_SQ_df = pd.DataFrame(CA_obs)\n",
    "\n",
    "CA_Chi_SQ_df[1] = [1215.5,1206.0,1222.5,1233.0,1290.5,1306.5]\n",
    "\n",
    "CA_Chi_SQ_df.columns = [\"CA Observed\", \"Expected\"]\n",
    "\n",
    "CA_Chi_SQ_df.T"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 78,
   "id": "357ba024",
   "metadata": {},
   "outputs": [],
   "source": [
    "scaler = StandardScaler()\n",
    "CA_Chi_SQ_df_scaled = scaler.fit_transform(CA_Chi_SQ_df)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 79,
   "id": "4eb25a21",
   "metadata": {},
   "outputs": [],
   "source": [
    "CA_Chi_SQ_df_scaled[:,0]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 80,
   "id": "5731ad9d",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Quartiles and outliers\n",
    "quartiles_columns = ALL_yearly_rent_df_t.columns\n",
    "\n",
    "for column in quartiles_columns:\n",
    "    quartiles = np.percentile(ALL_yearly_rent_df_t[column], [25, 50, 75])\n",
    "    lower_q = np.percentile(ALL_yearly_rent_df_t, 25)\n",
    "    upper_q = np.percentile(ALL_yearly_rent_df_t, 75)\n",
    "\n",
    "    IQR = upper_q - lower_q\n",
    "\n",
    "    lower_bound = lower_q - 1.5 * IQR\n",
    "    upper_bound = upper_q + 1.5 * IQR\n",
    "\n",
    "    outliers = ALL_yearly_rent_df_t.loc[(ALL_yearly_rent_df_t[column] < lower_bound) | (ALL_yearly_rent_df_t[column] > upper_bound)]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 81,
   "id": "e8add42e",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Histogram\n",
    "labels = []\n",
    "for state in ALL_yearly_rent_df_t.columns:\n",
    "    plt.hist(ALL_yearly_rent_df_t[state]) \n",
    "    labels.append(state)\n",
    "\n",
    "    plt.xlabel('Rent Values')\n",
    "    plt.ylabel('Frequency')\n",
    "    plt.title('Histogram of Rent')\n",
    "    \n",
    "plt.legend(labels)\n",
    "plt.savefig('Visualizations Outputs\\Histogram.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 82,
   "id": "beb944fe",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Dependencies and Set Up\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "import matplotlib.pyplot as plt\n",
    "import scipy.stats as st\n",
    "from scipy.stats import linregress\n",
    "import seaborn as sns  # For heatmap visualization\n",
    "from sklearn.preprocessing import StandardScaler"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 83,
   "id": "d672bd1a",
   "metadata": {},
   "outputs": [],
   "source": [
    "%notebook widget"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 84,
   "id": "1cc5f75b",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Created a path to the file making it into a dataframe\n",
    "rent_file = pd.read_csv(\"Raw_Price_Data//price.csv\")\n",
    "\n",
    "rent_df = pd.DataFrame(rent_file)\n",
    "\n",
    "rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 85,
   "id": "f3857c72",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Identified what columns are missing data\n",
    "clean_rent_df = rent_df.dropna(how = 'any')\n",
    "\n",
    "clean_rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 86,
   "id": "4f7f29aa",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Extracted states from data (CA, IL, NY, TX)\n",
    "four_states = [\"NY\", \"CA\", \"IL\", \"TX\"]\n",
    "\n",
    "four_states_df = rent_df[rent_df['State'].isin(four_states)]\n",
    "\n",
    "four_states_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 87,
   "id": "d48e6b5d",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Dropped all NaN values\n",
    "rent_df.dropna(inplace = True)\n",
    "\n",
    "#Display the DataFrame\n",
    "rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 88,
   "id": "77e4d28c",
   "metadata": {},
   "outputs": [],
   "source": [
    "#New York Data Frame\n",
    "NY_state = [\"NY\"]\n",
    "\n",
    "NY_state_df = rent_df[rent_df['State'].isin(NY_state)]\n",
    "\n",
    "NY_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 89,
   "id": "64540997",
   "metadata": {},
   "outputs": [],
   "source": [
    "#California Data Frame\n",
    "CA_state = [\"CA\"]\n",
    "\n",
    "CA_state_df = rent_df[rent_df['State'].isin(CA_state)]\n",
    "\n",
    "CA_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 90,
   "id": "4ad7610a",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Illinois Data Frame\n",
    "IL_state = [\"IL\"]\n",
    "\n",
    "IL_state_df = rent_df[rent_df['State'].isin(IL_state)]\n",
    "\n",
    "IL_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 91,
   "id": "7675accb",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Texas Data Frame\n",
    "TX_state = [\"TX\"]\n",
    "\n",
    "TX_state_df = rent_df[rent_df['State'].isin(TX_state)]\n",
    "\n",
    "TX_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 92,
   "id": "dd23b87c",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Made all of the columns into a list\n",
    "columns_list = ['January 2011',\n",
    "'February 2011','March 2011','April 2011','May 2011','June 2011','July 2011',\n",
    "'August 2011','September 2011','October 2011','November 2011','December 2011',\n",
    "'January 2012','February 2012','March 2012','April 2012','May 2012','June 2012',\n",
    "'July 2012','August 2012','September 2012','October 2012','November 2012','December 2012',\n",
    "'January 2013','February 2013','March 2013','April 2013','May 2013','June 2013','July 2013',\n",
    "'August 2013','September 2013','October 2013','November 2013','December 2013','January 2014',\n",
    "'February 2014','March 2014','April 2014','May 2014','June 2014','July 2014','August 2014',\n",
    "'September 2014','October 2014','November 2014','December 2014','January 2015','February 2015',\n",
    "'March 2015','April 2015','May 2015','June 2015','July 2015','August 2015','September 2015','October 2015',\n",
    "'November 2015','December 2015','January 2016','February 2016','March 2016','April 2016','May 2016',\n",
    "'June 2016','July 2016','August 2016','September 2016','October 2016','November 2016','December 2016']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 93,
   "id": "26b2fd8e",
   "metadata": {},
   "outputs": [],
   "source": [
    "# US median rent prices\n",
    "US_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    US_med_rent = np.median(clean_rent_df[i])\n",
    "\n",
    "    US_med_list.append(US_med_rent)\n",
    "\n",
    "print(US_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 94,
   "id": "153dff17",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put US med rent prices for each month and year into a DF\n",
    "US_med_df = pd.DataFrame(US_med_list, columns_list).T \n",
    "\n",
    "US_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 95,
   "id": "1e9b6801",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in IL\n",
    "IL_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    IL_med_rent = np.median(IL_state_df[i])\n",
    "\n",
    "    IL_med_list.append(IL_med_rent)\n",
    "\n",
    "print(IL_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 96,
   "id": "a00dedce",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put IL med rent prices for each month and year into a DF\n",
    "IL_med_df = pd.DataFrame(IL_med_list, columns_list).T \n",
    "\n",
    "IL_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 97,
   "id": "7f91e44f",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in CA\n",
    "CA_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    CA_med_rent = np.median(CA_state_df[i])\n",
    "\n",
    "    CA_med_list.append(CA_med_rent)\n",
    "\n",
    "print(CA_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 98,
   "id": "52d64e08",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put CA med rent prices for each month and year into a DF\n",
    "CA_med_df = pd.DataFrame(CA_med_list, columns_list).T \n",
    "\n",
    "CA_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 99,
   "id": "24839dae",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in TX\n",
    "TX_med_list=[]\n",
    "for i in columns_list:\n",
    "\n",
    "    TX_med_rent = np.median(TX_state_df[i])\n",
    "\n",
    "    TX_med_list.append(TX_med_rent)\n",
    "\n",
    "print(TX_med_list)  \n",
    "\n",
    "   "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 100,
   "id": "0288841c",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put TX med rent prices for each month and year into a DF\n",
    "TX_med_df = pd.DataFrame(TX_med_list, columns_list).T \n",
    "\n",
    "TX_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 101,
   "id": "579c128f",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in NY\n",
    "NY_med_list=[]\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    NY_med_rent = np.median(NY_state_df[i])\n",
    "    NY_med_list.append(NY_med_rent)\n",
    "\n",
    "print(NY_med_list)  "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 102,
   "id": "eff20a25",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Put NY med rent prices for each month and year into a DF\n",
    "NY_med_df = pd.DataFrame(NY_med_list, columns_list).T \n",
    "\n",
    "NY_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 103,
   "id": "93df0262",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Combined Median rent data for 4 states\n",
    "TX_CA_df = pd.concat([TX_med_df, CA_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "IL_NY_df = pd.concat([IL_med_df, NY_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "states_med_rent = pd.concat([TX_CA_df, IL_NY_df], axis=0, ignore_index=True)\n",
    "\n",
    "#0 = TX, 1 = CA, 2 = IL, 3 = NY\n",
    "states_med_rent.insert(0, \"States\", [\"TX\", \"CA\", \"IL\", \"NY\"])\n",
    "\n",
    "states_med_rent.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 104,
   "id": "681f5f60",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Created a table with US Med in it\n",
    "\n",
    "ALL_med_rent = pd.concat([states_med_rent, US_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "#ALL_med_rent.reset_index(drop=True)\n",
    "#ALL_med_rent.set_index('State', inplace=True, drop=True)\n",
    "#ALL_med_rent[ALL_med_rent.index[-1]] = \"US\"\n",
    "ALL_med_rent.insert(0, \"State\", [\"TX\", \"CA\", \"IL\", \"NY\", \"US\"])\n",
    "\n",
    "ALL_med_rent.drop([\"States\"], axis = 1, inplace=True)\n",
    "ALL_med_rent.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 105,
   "id": "cbe544e5",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for TX by year and make df\n",
    "TX_2011_rents = [1194.0, 1189.0, 1186.0, 1183.0, 1182.0, 1189.0, 1184.0, 1179.0, 1181.0, 1174.0, 1173.0, 1167.0]\n",
    "TX_2012_rents = [1164.0, 1162.0, 1165.0, 1159.0, 1155.0, 1158.0, 1168.0, 1172.0, 1177.0, 1179.0, 1173.0, 1171.0]\n",
    "TX_2013_rents = [1175.0, 1174.0, 1181.0, 1196.0, 1202.0, 1200.0, 1197.0, 1201.0, 1205.0, 1208.0, 1212.0, 1221.0]\n",
    "TX_2014_rents = [1224.0, 1224.0, 1222.0, 1225.0, 1221.0, 1218.0, 1221.0, 1234.0, 1245.0, 1256.0, 1272.0, 1275.0]\n",
    "TX_2015_rents = [1282.0, 1287.0, 1289.0, 1297.0, 1300.0, 1309.0, 1313.0, 1319.0, 1323.0, 1325.0, 1320.0, 1312.0]\n",
    "TX_2016_rents = [1313.0, 1319.0, 1326.0, 1325.0, 1338.0, 1346.0, 1350.0, 1343.0, 1340.0, 1335.0, 1335.0, 1337.0]\n",
    "\n",
    "\n",
    "TX_2011_med = np.median(TX_2011_rents)\n",
    "TX_2012_med = np.median(TX_2012_rents)\n",
    "TX_2013_med = np.median(TX_2013_rents)\n",
    "TX_2014_med = np.median(TX_2014_rents)\n",
    "TX_2015_med = np.median(TX_2015_rents)\n",
    "TX_2016_med = np.median(TX_2016_rents)\n",
    "\n",
    "TX_yearly_rent = {\"2011\":[TX_2011_med], \"2012\" :[TX_2012_med], \"2013\" :[TX_2013_med], \"2014\" :[TX_2014_med], \"2015\" :[TX_2015_med], \"2016\" :[TX_2016_med]}\n",
    "\n",
    "TX_yearly_rent_df = pd.DataFrame(TX_yearly_rent)\n",
    "\n",
    "TX_yearly_rent_df.insert(0, \"State\", [\"TX\"])\n",
    "\n",
    "TX_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "TX_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 106,
   "id": "47a99382",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for CA by year and make df\n",
    "CA_2011_rents = [1770.0, 1754.0, 1738.5, 1729.0, 1716.5, 1717.5, 1719.5, 1718.0, 1712.5, 1710.5, 1710.0, 1705.0]\n",
    "CA_2012_rents = [1702.5, 1695.5, 1696.5, 1697.0, 1700.5, 1713.5, 1710.5, 1709.0, 1702.0, 1704.5, 1700.0, 1701.0]\n",
    "CA_2013_rents = [1707.5, 1718.5, 1728.0, 1735.0, 1743.0, 1756.5, 1763.0, 1764.5, 1767.0, 1773.5, 1779.5, 1781.5]\n",
    "CA_2014_rents = [1782.5, 1781.0, 1785.5, 1784.5, 1787.0, 1790.0, 1794.0, 1807.5, 1824.0, 1842.5, 1859.5, 1875.0]\n",
    "CA_2015_rents = [1885.0, 1899.0, 1907.0, 1921.5, 1935.0, 1946.0, 1957.0, 1969.0, 1977.0, 1982.0, 1995.0, 2004.0]\n",
    "CA_2016_rents = [2014.5, 2036.5, 2056.0, 2062.5, 2072.0, 2092.0, 2104.0, 2115.0, 2124.5, 2128.5, 2134.0, 2150.5]\n",
    "\n",
    "CA_2011_med = np.median(CA_2011_rents)\n",
    "CA_2012_med = np.median(CA_2012_rents)\n",
    "CA_2013_med = np.median(CA_2013_rents)\n",
    "CA_2014_med = np.median(CA_2014_rents)\n",
    "CA_2015_med = np.median(CA_2015_rents)\n",
    "CA_2016_med = np.median(CA_2016_rents)\n",
    "\n",
    "CA_yearly_rent = {\"2011\":[CA_2011_med], \"2012\" :[CA_2012_med], \"2013\" :[CA_2013_med], \"2014\" :[CA_2014_med], \"2015\" :[CA_2015_med], \"2016\" :[CA_2016_med]}\n",
    "\n",
    "CA_yearly_rent_df = pd.DataFrame(CA_yearly_rent)\n",
    "\n",
    "CA_yearly_rent_df.insert(0, \"State\", [\"CA\"])\n",
    "\n",
    "CA_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "CA_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 107,
   "id": "3509ed76",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for IL by year and make df\n",
    "IL_2011_rents = [1425.0, 1426.0, 1422.5, 1421.5, 1413.5, 1406.5, 1392.5, 1382.0, 1380.0, 1370.0, 1363.5, 1355.5]\n",
    "IL_2012_rents = [1349.0, 1344.0, 1341.0, 1344.0, 1344.0, 1347.5, 1347.0, 1346.0, 1351.0, 1359.5, 1371.0, 1370.0]\n",
    "IL_2013_rents = [1364.5, 1351.5, 1345.5, 1347.0, 1354.0, 1360.0, 1363.0, 1364.5, 1372.5, 1379.0, 1385.5, 1392.0]\n",
    "IL_2014_rents = [1399.0, 1400.5, 1395.0, 1393.0, 1387.0, 1385.5, 1379.5, 1384.0, 1385.0, 1386.5, 1397.0, 1406.5]\n",
    "IL_2015_rents = [1411.5, 1408.0, 1416.5, 1414.5, 1413.0, 1413.0, 1414.5, 1414.0, 1411.0, 1403.0, 1398.5, 1396.0]\n",
    "IL_2016_rents = [1405.5, 1408.0, 1413.0, 1416.5, 1424.5, 1424.0, 1431.0, 1426.5, 1418.0, 1410.0, 1405.0, 1397.0]\n",
    "\n",
    "IL_2011_med = np.median(IL_2011_rents)\n",
    "IL_2012_med = np.median(IL_2012_rents)\n",
    "IL_2013_med = np.median(IL_2013_rents)\n",
    "IL_2014_med = np.median(IL_2014_rents)\n",
    "IL_2015_med = np.median(IL_2015_rents)\n",
    "IL_2016_med = np.median(IL_2016_rents)\n",
    "\n",
    "IL_yearly_rent = {\"2011\":[IL_2011_med], \"2012\" :[IL_2012_med], \"2013\" :[IL_2013_med], \"2014\" :[IL_2014_med], \"2015\" :[IL_2015_med], \"2016\" :[IL_2016_med]}\n",
    "\n",
    "IL_yearly_rent_df = pd.DataFrame(IL_yearly_rent)\n",
    "\n",
    "IL_yearly_rent_df.insert(0, \"State\", [\"IL\"])\n",
    "\n",
    "IL_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "IL_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 108,
   "id": "af08c170",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for NY by year and make df\n",
    "NY_2011_rents = [1369.5, 1383.5, 1380.5, 1388.0, 1390.5, 1401.0, 1401.0, 1399.0, 1397.0, 1399.0, 1400.5, 1399.0]\n",
    "NY_2012_rents = [1391.5, 1383.0, 1376.0, 1378.0, 1396.0, 1411.0, 1428.5, 1438.0, 1437.5, 1431.0, 1417.5, 1416.0]\n",
    "NY_2013_rents = [1419.5, 1432.0, 1434.0, 1431.5, 1434.0, 1418.5, 1384.5, 1368.5, 1366.5, 1379.0, 1398.5, 1395.0]\n",
    "NY_2014_rents = [1378.5, 1360.0, 1357.5, 1351.0, 1341.0, 1342.0, 1362.5, 1382.0, 1400.5, 1410.0, 1418.5, 1430.0]\n",
    "NY_2015_rents = [1440.5, 1443.0, 1449.0, 1448.5, 1444.5, 1437.5, 1428.5, 1403.0, 1388.5, 1376.0, 1371.5, 1363.0]\n",
    "NY_2016_rents = [1368.0, 1365.0, 1374.5, 1380.0, 1385.5, 1390.5, 1401.5, 1399.0, 1394.5, 1392.5, 1389.5, 1386.5]\n",
    "\n",
    "NY_2011_med = np.median(NY_2011_rents)\n",
    "NY_2012_med = np.median(NY_2012_rents)\n",
    "NY_2013_med = np.median(NY_2013_rents)\n",
    "NY_2014_med = np.median(NY_2014_rents)\n",
    "NY_2015_med = np.median(NY_2015_rents)\n",
    "NY_2016_med = np.median(NY_2016_rents)\n",
    "\n",
    "NY_yearly_rent = {\"2011\":[NY_2011_med], \"2012\" :[NY_2012_med], \"2013\" :[NY_2013_med], \"2014\" :[NY_2014_med], \"2015\" :[NY_2015_med], \"2016\" :[NY_2016_med]}\n",
    "\n",
    "NY_yearly_rent_df = pd.DataFrame(NY_yearly_rent)\n",
    "\n",
    "NY_yearly_rent_df.insert(0, \"State\", [\"NY\"])\n",
    "\n",
    "NY_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "NY_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 109,
   "id": "d8aeea2d",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for US by year and make df\n",
    "US_2011_rents = [1218.0, 1219.0, 1220.0, 1220.0, 1218.0, 1217.0, 1214.0, 1213.0, 1210.0, 1207.0, 1206.0, 1205.0]\n",
    "US_2012_rents = [1204.0, 1205.0, 1207.0, 1206.0, 1205.0, 1205.0, 1205.0, 1206.0, 1208.0, 1210.0, 1215.0, 1215.0]\n",
    "US_2013_rents = [1215.0, 1216.0, 1217.0, 1217.0, 1218.0, 1221.0, 1224.0, 1225.0, 1228.0, 1231.0, 1235.0, 1236.0]\n",
    "US_2014_rents = [1236.0, 1234.0, 1232.0, 1229.0, 1227.0, 1223.0, 1226.0, 1232.0, 1245.0, 1253.0, 1259.0, 1263.0]\n",
    "US_2015_rents = [1269.0, 1272.0, 1276.0, 1280.0, 1284.0, 1289.0, 1295.0, 1299.0, 1298.0, 1294.0, 1293.0, 1292.0]\n",
    "US_2016_rents = [1294.0, 1298.0, 1303.0, 1308.0, 1312.0, 1313.0, 1311.0, 1306.0, 1305.0, 1305.0, 1307.0, 1308.0]\n",
    "\n",
    "US_2011_med = np.median(US_2011_rents)\n",
    "US_2012_med = np.median(US_2012_rents)\n",
    "US_2013_med = np.median(US_2013_rents)\n",
    "US_2014_med = np.median(US_2014_rents)\n",
    "US_2015_med = np.median(US_2015_rents)\n",
    "US_2016_med = np.median(US_2016_rents)\n",
    "\n",
    "US_yearly_rent = {\"2011\":[US_2011_med], \"2012\" :[US_2012_med], \"2013\" :[US_2013_med], \"2014\" :[US_2014_med], \"2015\" :[US_2015_med], \"2016\" :[US_2016_med]}\n",
    "\n",
    "US_yearly_rent_df = pd.DataFrame(US_yearly_rent)\n",
    "\n",
    "US_yearly_rent_df.insert(0, \"State\", [\"US\"])\n",
    "\n",
    "US_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "US_yearly_rent_df.head(10)\n",
    "\n",
    "#ayear = [2011,2012,2013,2014,2015,2016]\n",
    "#rent_cost = [US_2011_med,US_2012_med,US_2013_med,US_2014_med,US_2015_med,US_2016_med]\n",
    "#correlation = st.pearsonr(rent_cost,year)\n",
    "#print(f\"The correlation between both factors is {round(correlation[0],2)}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 110,
   "id": "5b1b795e",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Combined yearly rents in to one df\n",
    "TX_CA_yearly_rent_df = pd.concat([TX_yearly_rent_df, CA_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "TX_CA_yearly_rent_df\n",
    "\n",
    "IL_NY_yearly_rent_df = pd.concat([IL_yearly_rent_df, NY_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "IL_NY_yearly_rent_df\n",
    "\n",
    "states_yearly_rent_df = pd.concat([TX_CA_yearly_rent_df, IL_NY_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "states_yearly_rent_df\n",
    "\n",
    "ALL_yearly_rent_df = pd.concat([states_yearly_rent_df, US_yearly_rent_df], axis=0, ignore_index = True)\n",
    "#0 = TX, 1 = CA, 2 = IL, 3 = NY\n",
    "\n",
    "ALL_yearly_rent_df.insert(0, \"State\", ['TX', 'CA', 'IL', 'NY', 'US'])\n",
    "\n",
    "ALL_yearly_rent_df.set_index(['State'], drop=True, append=False, inplace=True, verify_integrity=False)\n",
    "#ALL_yearly_rent_df.reset_index()\n",
    "\n",
    "ALL_yearly_rent_df['Rent Change (%)'] = ((ALL_yearly_rent_df[['2011', '2016']].pct_change(axis=1)['2016'])* 100).round(2)\n",
    "\n",
    "ALL_yearly_rent_df.head(30)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 111,
   "id": "877b878d",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Line graph of median US Rent change from 2011-2016\n",
    "#Used https://stackoverflow.com/questions/1347791/unicode-error-unicodeescape-codec-cant-decode-bytes-cannot-open-text-file\n",
    "#To help with unicode error when trying to save plot\n",
    "\n",
    "years = [\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]\n",
    "\n",
    "US_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"US\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"US\", color=\"purple\") \n",
    "\n",
    "plt.xlabel(\"Year\")\n",
    "plt.ylabel(\"Cost of Rent (USD)\")\n",
    "plt.title(\"US Median Rent 2011-2016\")\n",
    "\n",
    "plt.savefig('Visualizations Outputs\\\\US_Rent_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 112,
   "id": "8a575131",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Line graph showing all 4 states median rent prices throughout timeframe 2011-2016\n",
    "\n",
    "years = [\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\"]\n",
    "\n",
    "TX_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"TX\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"Texas\", color=\"blue\") \n",
    "\n",
    "CA_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"CA\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"California\", color=\"orange\") \n",
    "\n",
    "IL_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"IL\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"Illinois\", color=\"green\") \n",
    "\n",
    "NY_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"NY\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"New York\", color=\"red\") \n",
    "\n",
    "US_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"US\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"US\", color=\"purple\") \n",
    "\n",
    "legend_list = [\"TX\", \"CA\", \"IL\", \"NY\", \"US\"]\n",
    "plt.legend([\"TX\", \"CA\", \"IL\", \"NY\", \"US\"], loc=\"best\")\n",
    "\n",
    "\n",
    "plt.xlabel(\"Year\")\n",
    "plt.ylabel(\"Cost of Rent (USD)\")\n",
    "plt.title(\"US, TX, CA, IL, NY Median Rent Prices 2011-2016\")\n",
    "plt.savefig('Visualizations Outputs\\All_Rent_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 113,
   "id": "231cd42b",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Bar graph showing the change in rent (%)\n",
    "rent_change_bar = ALL_yearly_rent_df['Rent Change (%)'].plot(kind=\"bar\", color=[\"blue\", \"orange\", \"green\", \"red\", \"purple\"], figsize=(8,6),\n",
    "                                   title=\"Rent Change by State (%)\",\n",
    "                                   xlabel=\"State\",\n",
    "                                   ylabel=\"Percent of Change\")\n",
    "rent_change_bar.axhline(y=0, color= 'black', linewidth=1,)\n",
    "\n",
    "plt.savefig('Visualizations Outputs\\Change_Rent_graph.png')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 114,
   "id": "5f356561",
   "metadata": {},
   "outputs": [],
   "source": [
    "year = [2011,2011, 2011, 2011, 2012, 2012, 2012, 2012, 2013, 2013, 2013, 2013, 2014, 2014, 2014, 2014, 2015, 2015, 2015, 2015, 2016, 2016, 2016, 2016]\n",
    "rent_cost = [1182.50,1717.75,1399.50,1398.00, 1166.50,1701.50,1347.25,1413.50,1200.50,1759.75,1363.75,1408.50,1224.5,1792.0,1390.0,1370.5,1310.50,1951.50,1412.25,1433.00,1336.00,2098.00,1414.75,1388.00]\n",
    "correlation = st.pearsonr(rent_cost,year)\n",
    "print(f\"The correlation between both factors is {round(correlation[0],2)}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 115,
   "id": "4e2d612e",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Box plot for data\n",
    "\n",
    "rents_data = pd.DataFrame({\"TX\": [1182.50,1166.50,1200.50,1224.5,1310.50,1336.00], \"CA\": [1717.75,1701.50,1759.75,1792.0,1951.50,2098.00], \n",
    "\"IL\": [1399.50,1347.25,1363.75,1390.0,1412.25,1414.75], \"NY\": [1398.00,1413.50,1408.50,1370.5,1433.00,1388.00], \"US\": [1215.5,1206.0,1222.5,1233.0,1290.5,1306.5]})\n",
    "\n",
    "# Plot the dataframe\n",
    "ax = rents_data[['TX', 'CA', 'IL', 'NY', 'US']].plot(kind='box', title='Boxplot for USA, TX, CA, IL, NY')\n",
    "\n",
    "# Display the plot\n",
    "plt.savefig('Visualizations Outputs\\Boxplot_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 116,
   "id": "bd7760e5",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Histogram\n",
    "labels = []\n",
    "for state in ALL_yearly_rent_df_t.columns:\n",
    "    plt.hist(ALL_yearly_rent_df_t[state]) \n",
    "    labels.append(state)\n",
    "\n",
    "    plt.xlabel('Rent Values')\n",
    "    plt.ylabel('Frequency')\n",
    "    plt.title('Histogram of Rent')\n",
    "    \n",
    "plt.legend(labels)\n",
    "plt.savefig('Visualizations Outputs\\Histogram.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 117,
   "id": "ae1f6c4f",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Dependencies and Set Up\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "import matplotlib.pyplot as plt\n",
    "import scipy.stats as st\n",
    "from scipy.stats import linregress\n",
    "import seaborn as sns  # For heatmap visualization\n",
    "from sklearn.preprocessing import StandardScaler"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 118,
   "id": "e25d61cb",
   "metadata": {},
   "outputs": [],
   "source": [
    "%notebook widget"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 119,
   "id": "c57e620e",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Created a path to the file making it into a dataframe\n",
    "rent_file = pd.read_csv(\"Raw_Price_Data//price.csv\")\n",
    "\n",
    "rent_df = pd.DataFrame(rent_file)\n",
    "\n",
    "rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 120,
   "id": "e50e6180",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Identified what columns are missing data\n",
    "clean_rent_df = rent_df.dropna(how = 'any')\n",
    "\n",
    "clean_rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 121,
   "id": "f93d68d5",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Extracted states from data (CA, IL, NY, TX)\n",
    "four_states = [\"NY\", \"CA\", \"IL\", \"TX\"]\n",
    "\n",
    "four_states_df = rent_df[rent_df['State'].isin(four_states)]\n",
    "\n",
    "four_states_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 122,
   "id": "822d0c9d",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Dropped all NaN values\n",
    "rent_df.dropna(inplace = True)\n",
    "\n",
    "#Display the DataFrame\n",
    "rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 123,
   "id": "27904afc",
   "metadata": {},
   "outputs": [],
   "source": [
    "#New York Data Frame\n",
    "NY_state = [\"NY\"]\n",
    "\n",
    "NY_state_df = rent_df[rent_df['State'].isin(NY_state)]\n",
    "\n",
    "NY_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 124,
   "id": "ae39af6c",
   "metadata": {},
   "outputs": [],
   "source": [
    "#California Data Frame\n",
    "CA_state = [\"CA\"]\n",
    "\n",
    "CA_state_df = rent_df[rent_df['State'].isin(CA_state)]\n",
    "\n",
    "CA_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 125,
   "id": "7d77238b",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Illinois Data Frame\n",
    "IL_state = [\"IL\"]\n",
    "\n",
    "IL_state_df = rent_df[rent_df['State'].isin(IL_state)]\n",
    "\n",
    "IL_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 126,
   "id": "ab98e2a1",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Texas Data Frame\n",
    "TX_state = [\"TX\"]\n",
    "\n",
    "TX_state_df = rent_df[rent_df['State'].isin(TX_state)]\n",
    "\n",
    "TX_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 127,
   "id": "50267e17",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Made all of the columns into a list\n",
    "columns_list = ['January 2011',\n",
    "'February 2011','March 2011','April 2011','May 2011','June 2011','July 2011',\n",
    "'August 2011','September 2011','October 2011','November 2011','December 2011',\n",
    "'January 2012','February 2012','March 2012','April 2012','May 2012','June 2012',\n",
    "'July 2012','August 2012','September 2012','October 2012','November 2012','December 2012',\n",
    "'January 2013','February 2013','March 2013','April 2013','May 2013','June 2013','July 2013',\n",
    "'August 2013','September 2013','October 2013','November 2013','December 2013','January 2014',\n",
    "'February 2014','March 2014','April 2014','May 2014','June 2014','July 2014','August 2014',\n",
    "'September 2014','October 2014','November 2014','December 2014','January 2015','February 2015',\n",
    "'March 2015','April 2015','May 2015','June 2015','July 2015','August 2015','September 2015','October 2015',\n",
    "'November 2015','December 2015','January 2016','February 2016','March 2016','April 2016','May 2016',\n",
    "'June 2016','July 2016','August 2016','September 2016','October 2016','November 2016','December 2016']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 128,
   "id": "3b0feeae",
   "metadata": {},
   "outputs": [],
   "source": [
    "# US median rent prices\n",
    "US_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    US_med_rent = np.median(clean_rent_df[i])\n",
    "\n",
    "    US_med_list.append(US_med_rent)\n",
    "\n",
    "print(US_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 129,
   "id": "a73ff806",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put US med rent prices for each month and year into a DF\n",
    "US_med_df = pd.DataFrame(US_med_list, columns_list).T \n",
    "\n",
    "US_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 130,
   "id": "11d2471b",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in IL\n",
    "IL_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    IL_med_rent = np.median(IL_state_df[i])\n",
    "\n",
    "    IL_med_list.append(IL_med_rent)\n",
    "\n",
    "print(IL_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 131,
   "id": "226cba14",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put IL med rent prices for each month and year into a DF\n",
    "IL_med_df = pd.DataFrame(IL_med_list, columns_list).T \n",
    "\n",
    "IL_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 132,
   "id": "5bc7633a",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in CA\n",
    "CA_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    CA_med_rent = np.median(CA_state_df[i])\n",
    "\n",
    "    CA_med_list.append(CA_med_rent)\n",
    "\n",
    "print(CA_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 133,
   "id": "4f9d2005",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put CA med rent prices for each month and year into a DF\n",
    "CA_med_df = pd.DataFrame(CA_med_list, columns_list).T \n",
    "\n",
    "CA_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 134,
   "id": "6778a57b",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in TX\n",
    "TX_med_list=[]\n",
    "for i in columns_list:\n",
    "\n",
    "    TX_med_rent = np.median(TX_state_df[i])\n",
    "\n",
    "    TX_med_list.append(TX_med_rent)\n",
    "\n",
    "print(TX_med_list)  \n",
    "\n",
    "   "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 135,
   "id": "cdc4c153",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put TX med rent prices for each month and year into a DF\n",
    "TX_med_df = pd.DataFrame(TX_med_list, columns_list).T \n",
    "\n",
    "TX_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 136,
   "id": "0d230573",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in NY\n",
    "NY_med_list=[]\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    NY_med_rent = np.median(NY_state_df[i])\n",
    "    NY_med_list.append(NY_med_rent)\n",
    "\n",
    "print(NY_med_list)  "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 137,
   "id": "64fb29ce",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Put NY med rent prices for each month and year into a DF\n",
    "NY_med_df = pd.DataFrame(NY_med_list, columns_list).T \n",
    "\n",
    "NY_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 138,
   "id": "bd6ea0ac",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Combined Median rent data for 4 states\n",
    "TX_CA_df = pd.concat([TX_med_df, CA_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "IL_NY_df = pd.concat([IL_med_df, NY_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "states_med_rent = pd.concat([TX_CA_df, IL_NY_df], axis=0, ignore_index=True)\n",
    "\n",
    "#0 = TX, 1 = CA, 2 = IL, 3 = NY\n",
    "states_med_rent.insert(0, \"States\", [\"TX\", \"CA\", \"IL\", \"NY\"])\n",
    "\n",
    "states_med_rent.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 139,
   "id": "57f10749",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Created a table with US Med in it\n",
    "\n",
    "ALL_med_rent = pd.concat([states_med_rent, US_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "#ALL_med_rent.reset_index(drop=True)\n",
    "#ALL_med_rent.set_index('State', inplace=True, drop=True)\n",
    "#ALL_med_rent[ALL_med_rent.index[-1]] = \"US\"\n",
    "ALL_med_rent.insert(0, \"State\", [\"TX\", \"CA\", \"IL\", \"NY\", \"US\"])\n",
    "\n",
    "ALL_med_rent.drop([\"States\"], axis = 1, inplace=True)\n",
    "ALL_med_rent.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 140,
   "id": "d2511f33",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for TX by year and make df\n",
    "TX_2011_rents = [1194.0, 1189.0, 1186.0, 1183.0, 1182.0, 1189.0, 1184.0, 1179.0, 1181.0, 1174.0, 1173.0, 1167.0]\n",
    "TX_2012_rents = [1164.0, 1162.0, 1165.0, 1159.0, 1155.0, 1158.0, 1168.0, 1172.0, 1177.0, 1179.0, 1173.0, 1171.0]\n",
    "TX_2013_rents = [1175.0, 1174.0, 1181.0, 1196.0, 1202.0, 1200.0, 1197.0, 1201.0, 1205.0, 1208.0, 1212.0, 1221.0]\n",
    "TX_2014_rents = [1224.0, 1224.0, 1222.0, 1225.0, 1221.0, 1218.0, 1221.0, 1234.0, 1245.0, 1256.0, 1272.0, 1275.0]\n",
    "TX_2015_rents = [1282.0, 1287.0, 1289.0, 1297.0, 1300.0, 1309.0, 1313.0, 1319.0, 1323.0, 1325.0, 1320.0, 1312.0]\n",
    "TX_2016_rents = [1313.0, 1319.0, 1326.0, 1325.0, 1338.0, 1346.0, 1350.0, 1343.0, 1340.0, 1335.0, 1335.0, 1337.0]\n",
    "\n",
    "\n",
    "TX_2011_med = np.median(TX_2011_rents)\n",
    "TX_2012_med = np.median(TX_2012_rents)\n",
    "TX_2013_med = np.median(TX_2013_rents)\n",
    "TX_2014_med = np.median(TX_2014_rents)\n",
    "TX_2015_med = np.median(TX_2015_rents)\n",
    "TX_2016_med = np.median(TX_2016_rents)\n",
    "\n",
    "TX_yearly_rent = {\"2011\":[TX_2011_med], \"2012\" :[TX_2012_med], \"2013\" :[TX_2013_med], \"2014\" :[TX_2014_med], \"2015\" :[TX_2015_med], \"2016\" :[TX_2016_med]}\n",
    "\n",
    "TX_yearly_rent_df = pd.DataFrame(TX_yearly_rent)\n",
    "\n",
    "TX_yearly_rent_df.insert(0, \"State\", [\"TX\"])\n",
    "\n",
    "TX_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "TX_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 141,
   "id": "6e3a5f2f",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for CA by year and make df\n",
    "CA_2011_rents = [1770.0, 1754.0, 1738.5, 1729.0, 1716.5, 1717.5, 1719.5, 1718.0, 1712.5, 1710.5, 1710.0, 1705.0]\n",
    "CA_2012_rents = [1702.5, 1695.5, 1696.5, 1697.0, 1700.5, 1713.5, 1710.5, 1709.0, 1702.0, 1704.5, 1700.0, 1701.0]\n",
    "CA_2013_rents = [1707.5, 1718.5, 1728.0, 1735.0, 1743.0, 1756.5, 1763.0, 1764.5, 1767.0, 1773.5, 1779.5, 1781.5]\n",
    "CA_2014_rents = [1782.5, 1781.0, 1785.5, 1784.5, 1787.0, 1790.0, 1794.0, 1807.5, 1824.0, 1842.5, 1859.5, 1875.0]\n",
    "CA_2015_rents = [1885.0, 1899.0, 1907.0, 1921.5, 1935.0, 1946.0, 1957.0, 1969.0, 1977.0, 1982.0, 1995.0, 2004.0]\n",
    "CA_2016_rents = [2014.5, 2036.5, 2056.0, 2062.5, 2072.0, 2092.0, 2104.0, 2115.0, 2124.5, 2128.5, 2134.0, 2150.5]\n",
    "\n",
    "CA_2011_med = np.median(CA_2011_rents)\n",
    "CA_2012_med = np.median(CA_2012_rents)\n",
    "CA_2013_med = np.median(CA_2013_rents)\n",
    "CA_2014_med = np.median(CA_2014_rents)\n",
    "CA_2015_med = np.median(CA_2015_rents)\n",
    "CA_2016_med = np.median(CA_2016_rents)\n",
    "\n",
    "CA_yearly_rent = {\"2011\":[CA_2011_med], \"2012\" :[CA_2012_med], \"2013\" :[CA_2013_med], \"2014\" :[CA_2014_med], \"2015\" :[CA_2015_med], \"2016\" :[CA_2016_med]}\n",
    "\n",
    "CA_yearly_rent_df = pd.DataFrame(CA_yearly_rent)\n",
    "\n",
    "CA_yearly_rent_df.insert(0, \"State\", [\"CA\"])\n",
    "\n",
    "CA_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "CA_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 142,
   "id": "074f5d44",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for IL by year and make df\n",
    "IL_2011_rents = [1425.0, 1426.0, 1422.5, 1421.5, 1413.5, 1406.5, 1392.5, 1382.0, 1380.0, 1370.0, 1363.5, 1355.5]\n",
    "IL_2012_rents = [1349.0, 1344.0, 1341.0, 1344.0, 1344.0, 1347.5, 1347.0, 1346.0, 1351.0, 1359.5, 1371.0, 1370.0]\n",
    "IL_2013_rents = [1364.5, 1351.5, 1345.5, 1347.0, 1354.0, 1360.0, 1363.0, 1364.5, 1372.5, 1379.0, 1385.5, 1392.0]\n",
    "IL_2014_rents = [1399.0, 1400.5, 1395.0, 1393.0, 1387.0, 1385.5, 1379.5, 1384.0, 1385.0, 1386.5, 1397.0, 1406.5]\n",
    "IL_2015_rents = [1411.5, 1408.0, 1416.5, 1414.5, 1413.0, 1413.0, 1414.5, 1414.0, 1411.0, 1403.0, 1398.5, 1396.0]\n",
    "IL_2016_rents = [1405.5, 1408.0, 1413.0, 1416.5, 1424.5, 1424.0, 1431.0, 1426.5, 1418.0, 1410.0, 1405.0, 1397.0]\n",
    "\n",
    "IL_2011_med = np.median(IL_2011_rents)\n",
    "IL_2012_med = np.median(IL_2012_rents)\n",
    "IL_2013_med = np.median(IL_2013_rents)\n",
    "IL_2014_med = np.median(IL_2014_rents)\n",
    "IL_2015_med = np.median(IL_2015_rents)\n",
    "IL_2016_med = np.median(IL_2016_rents)\n",
    "\n",
    "IL_yearly_rent = {\"2011\":[IL_2011_med], \"2012\" :[IL_2012_med], \"2013\" :[IL_2013_med], \"2014\" :[IL_2014_med], \"2015\" :[IL_2015_med], \"2016\" :[IL_2016_med]}\n",
    "\n",
    "IL_yearly_rent_df = pd.DataFrame(IL_yearly_rent)\n",
    "\n",
    "IL_yearly_rent_df.insert(0, \"State\", [\"IL\"])\n",
    "\n",
    "IL_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "IL_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 143,
   "id": "8c0818c8",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for NY by year and make df\n",
    "NY_2011_rents = [1369.5, 1383.5, 1380.5, 1388.0, 1390.5, 1401.0, 1401.0, 1399.0, 1397.0, 1399.0, 1400.5, 1399.0]\n",
    "NY_2012_rents = [1391.5, 1383.0, 1376.0, 1378.0, 1396.0, 1411.0, 1428.5, 1438.0, 1437.5, 1431.0, 1417.5, 1416.0]\n",
    "NY_2013_rents = [1419.5, 1432.0, 1434.0, 1431.5, 1434.0, 1418.5, 1384.5, 1368.5, 1366.5, 1379.0, 1398.5, 1395.0]\n",
    "NY_2014_rents = [1378.5, 1360.0, 1357.5, 1351.0, 1341.0, 1342.0, 1362.5, 1382.0, 1400.5, 1410.0, 1418.5, 1430.0]\n",
    "NY_2015_rents = [1440.5, 1443.0, 1449.0, 1448.5, 1444.5, 1437.5, 1428.5, 1403.0, 1388.5, 1376.0, 1371.5, 1363.0]\n",
    "NY_2016_rents = [1368.0, 1365.0, 1374.5, 1380.0, 1385.5, 1390.5, 1401.5, 1399.0, 1394.5, 1392.5, 1389.5, 1386.5]\n",
    "\n",
    "NY_2011_med = np.median(NY_2011_rents)\n",
    "NY_2012_med = np.median(NY_2012_rents)\n",
    "NY_2013_med = np.median(NY_2013_rents)\n",
    "NY_2014_med = np.median(NY_2014_rents)\n",
    "NY_2015_med = np.median(NY_2015_rents)\n",
    "NY_2016_med = np.median(NY_2016_rents)\n",
    "\n",
    "NY_yearly_rent = {\"2011\":[NY_2011_med], \"2012\" :[NY_2012_med], \"2013\" :[NY_2013_med], \"2014\" :[NY_2014_med], \"2015\" :[NY_2015_med], \"2016\" :[NY_2016_med]}\n",
    "\n",
    "NY_yearly_rent_df = pd.DataFrame(NY_yearly_rent)\n",
    "\n",
    "NY_yearly_rent_df.insert(0, \"State\", [\"NY\"])\n",
    "\n",
    "NY_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "NY_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 144,
   "id": "33776878",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for US by year and make df\n",
    "US_2011_rents = [1218.0, 1219.0, 1220.0, 1220.0, 1218.0, 1217.0, 1214.0, 1213.0, 1210.0, 1207.0, 1206.0, 1205.0]\n",
    "US_2012_rents = [1204.0, 1205.0, 1207.0, 1206.0, 1205.0, 1205.0, 1205.0, 1206.0, 1208.0, 1210.0, 1215.0, 1215.0]\n",
    "US_2013_rents = [1215.0, 1216.0, 1217.0, 1217.0, 1218.0, 1221.0, 1224.0, 1225.0, 1228.0, 1231.0, 1235.0, 1236.0]\n",
    "US_2014_rents = [1236.0, 1234.0, 1232.0, 1229.0, 1227.0, 1223.0, 1226.0, 1232.0, 1245.0, 1253.0, 1259.0, 1263.0]\n",
    "US_2015_rents = [1269.0, 1272.0, 1276.0, 1280.0, 1284.0, 1289.0, 1295.0, 1299.0, 1298.0, 1294.0, 1293.0, 1292.0]\n",
    "US_2016_rents = [1294.0, 1298.0, 1303.0, 1308.0, 1312.0, 1313.0, 1311.0, 1306.0, 1305.0, 1305.0, 1307.0, 1308.0]\n",
    "\n",
    "US_2011_med = np.median(US_2011_rents)\n",
    "US_2012_med = np.median(US_2012_rents)\n",
    "US_2013_med = np.median(US_2013_rents)\n",
    "US_2014_med = np.median(US_2014_rents)\n",
    "US_2015_med = np.median(US_2015_rents)\n",
    "US_2016_med = np.median(US_2016_rents)\n",
    "\n",
    "US_yearly_rent = {\"2011\":[US_2011_med], \"2012\" :[US_2012_med], \"2013\" :[US_2013_med], \"2014\" :[US_2014_med], \"2015\" :[US_2015_med], \"2016\" :[US_2016_med]}\n",
    "\n",
    "US_yearly_rent_df = pd.DataFrame(US_yearly_rent)\n",
    "\n",
    "US_yearly_rent_df.insert(0, \"State\", [\"US\"])\n",
    "\n",
    "US_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "US_yearly_rent_df.head(10)\n",
    "\n",
    "#ayear = [2011,2012,2013,2014,2015,2016]\n",
    "#rent_cost = [US_2011_med,US_2012_med,US_2013_med,US_2014_med,US_2015_med,US_2016_med]\n",
    "#correlation = st.pearsonr(rent_cost,year)\n",
    "#print(f\"The correlation between both factors is {round(correlation[0],2)}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 145,
   "id": "442cbbd2",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Combined yearly rents in to one df\n",
    "TX_CA_yearly_rent_df = pd.concat([TX_yearly_rent_df, CA_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "TX_CA_yearly_rent_df\n",
    "\n",
    "IL_NY_yearly_rent_df = pd.concat([IL_yearly_rent_df, NY_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "IL_NY_yearly_rent_df\n",
    "\n",
    "states_yearly_rent_df = pd.concat([TX_CA_yearly_rent_df, IL_NY_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "states_yearly_rent_df\n",
    "\n",
    "ALL_yearly_rent_df = pd.concat([states_yearly_rent_df, US_yearly_rent_df], axis=0, ignore_index = True)\n",
    "#0 = TX, 1 = CA, 2 = IL, 3 = NY\n",
    "\n",
    "ALL_yearly_rent_df.insert(0, \"State\", ['TX', 'CA', 'IL', 'NY', 'US'])\n",
    "\n",
    "ALL_yearly_rent_df.set_index(['State'], drop=True, append=False, inplace=True, verify_integrity=False)\n",
    "#ALL_yearly_rent_df.reset_index()\n",
    "\n",
    "ALL_yearly_rent_df['Rent Change (%)'] = ((ALL_yearly_rent_df[['2011', '2016']].pct_change(axis=1)['2016'])* 100).round(2)\n",
    "\n",
    "ALL_yearly_rent_df.head(30)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 146,
   "id": "b4f44356",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Line graph of median US Rent change from 2011-2016\n",
    "#Used https://stackoverflow.com/questions/1347791/unicode-error-unicodeescape-codec-cant-decode-bytes-cannot-open-text-file\n",
    "#To help with unicode error when trying to save plot\n",
    "\n",
    "years = [\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]\n",
    "\n",
    "US_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"US\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"US\", color=\"purple\") \n",
    "\n",
    "plt.xlabel(\"Year\")\n",
    "plt.ylabel(\"Cost of Rent (USD)\")\n",
    "plt.title(\"US Median Rent 2011-2016\")\n",
    "\n",
    "plt.savefig('Visualizations Outputs\\\\US_Rent_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 147,
   "id": "9a89b73b",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Line graph showing all 4 states median rent prices throughout timeframe 2011-2016\n",
    "\n",
    "years = [\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\"]\n",
    "\n",
    "TX_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"TX\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"Texas\", color=\"blue\") \n",
    "\n",
    "CA_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"CA\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"California\", color=\"orange\") \n",
    "\n",
    "IL_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"IL\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"Illinois\", color=\"green\") \n",
    "\n",
    "NY_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"NY\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"New York\", color=\"red\") \n",
    "\n",
    "US_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"US\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"US\", color=\"purple\") \n",
    "\n",
    "legend_list = [\"TX\", \"CA\", \"IL\", \"NY\", \"US\"]\n",
    "plt.legend([\"TX\", \"CA\", \"IL\", \"NY\", \"US\"], loc=\"best\")\n",
    "\n",
    "\n",
    "plt.xlabel(\"Year\")\n",
    "plt.ylabel(\"Cost of Rent (USD)\")\n",
    "plt.title(\"US, TX, CA, IL, NY Median Rent Prices 2011-2016\")\n",
    "plt.savefig('Visualizations Outputs\\All_Rent_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 148,
   "id": "2892a248",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Bar graph showing the change in rent (%)\n",
    "rent_change_bar = ALL_yearly_rent_df['Rent Change (%)'].plot(kind=\"bar\", color=[\"blue\", \"orange\", \"green\", \"red\", \"purple\"], figsize=(8,6),\n",
    "                                   title=\"Rent Change by State (%)\",\n",
    "                                   xlabel=\"State\",\n",
    "                                   ylabel=\"Percent of Change\")\n",
    "rent_change_bar.axhline(y=0, color= 'black', linewidth=1,)\n",
    "\n",
    "plt.savefig('Visualizations Outputs\\Change_Rent_graph.png')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 149,
   "id": "83c1aae8",
   "metadata": {},
   "outputs": [],
   "source": [
    "year = [2011,2011, 2011, 2011, 2012, 2012, 2012, 2012, 2013, 2013, 2013, 2013, 2014, 2014, 2014, 2014, 2015, 2015, 2015, 2015, 2016, 2016, 2016, 2016]\n",
    "rent_cost = [1182.50,1717.75,1399.50,1398.00, 1166.50,1701.50,1347.25,1413.50,1200.50,1759.75,1363.75,1408.50,1224.5,1792.0,1390.0,1370.5,1310.50,1951.50,1412.25,1433.00,1336.00,2098.00,1414.75,1388.00]\n",
    "correlation = st.pearsonr(rent_cost,year)\n",
    "print(f\"The correlation between both factors is {round(correlation[0],2)}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 150,
   "id": "d0bf02fe",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Box plot for data\n",
    "\n",
    "rents_data = pd.DataFrame({\"TX\": [1182.50,1166.50,1200.50,1224.5,1310.50,1336.00], \"CA\": [1717.75,1701.50,1759.75,1792.0,1951.50,2098.00], \n",
    "\"IL\": [1399.50,1347.25,1363.75,1390.0,1412.25,1414.75], \"NY\": [1398.00,1413.50,1408.50,1370.5,1433.00,1388.00], \"US\": [1215.5,1206.0,1222.5,1233.0,1290.5,1306.5]})\n",
    "\n",
    "# Plot the dataframe\n",
    "ax = rents_data[['TX', 'CA', 'IL', 'NY', 'US']].plot(kind='box', title='Boxplot for USA, TX, CA, IL, NY')\n",
    "\n",
    "# Display the plot\n",
    "plt.savefig('Visualizations Outputs\\Boxplot_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 151,
   "id": "1752a31f",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Histogram\n",
    "labels = []\n",
    "for state in ALL_yearly_rent_df_t.columns:\n",
    "    plt.hist(ALL_yearly_rent_df_t[state]) \n",
    "    labels.append(state)\n",
    "\n",
    "    plt.xlabel('Rent Values')\n",
    "    plt.ylabel('Frequency')\n",
    "    plt.title('Histogram of Rent')\n",
    "    \n",
    "plt.legend(labels)\n",
    "plt.savefig('Visualizations Outputs\\Histogram.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 152,
   "id": "e59160b2",
   "metadata": {},
   "outputs": [],
   "source": [
    "# New dataframe where the states are the columns\n",
    "# New dataframe where the states are the columns\n",
    "ALL_yearly_rent_df_t= ALL_yearly_rent_df[[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\"]].T"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 153,
   "id": "b60d89ec",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Histogram\n",
    "labels = []\n",
    "for state in ALL_yearly_rent_df_t.columns:\n",
    "    plt.hist(ALL_yearly_rent_df_t[state]) \n",
    "    labels.append(state)\n",
    "\n",
    "    plt.xlabel('Rent Values')\n",
    "    plt.ylabel('Frequency')\n",
    "    plt.title('Histogram of Rent')\n",
    "    \n",
    "plt.legend(labels)\n",
    "plt.savefig('Visualizations Outputs\\Histogram.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 154,
   "id": "0175f065",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Dependencies and Set Up\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "import matplotlib.pyplot as plt\n",
    "import scipy.stats as st\n",
    "from scipy.stats import linregress\n",
    "import seaborn as sns  # For heatmap visualization\n",
    "from sklearn.preprocessing import StandardScaler"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 155,
   "id": "0c51c2ad",
   "metadata": {},
   "outputs": [],
   "source": [
    "%notebook widget"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 156,
   "id": "6e6855e0",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Created a path to the file making it into a dataframe\n",
    "rent_file = pd.read_csv(\"Raw_Price_Data//price.csv\")\n",
    "\n",
    "rent_df = pd.DataFrame(rent_file)\n",
    "\n",
    "rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 157,
   "id": "7627ba40",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Identified what columns are missing data\n",
    "clean_rent_df = rent_df.dropna(how = 'any')\n",
    "\n",
    "clean_rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 158,
   "id": "ecae72de",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Extracted states from data (CA, IL, NY, TX)\n",
    "four_states = [\"NY\", \"CA\", \"IL\", \"TX\"]\n",
    "\n",
    "four_states_df = rent_df[rent_df['State'].isin(four_states)]\n",
    "\n",
    "four_states_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 159,
   "id": "3ffa4658",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Dropped all NaN values\n",
    "rent_df.dropna(inplace = True)\n",
    "\n",
    "#Display the DataFrame\n",
    "rent_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 160,
   "id": "7cc1c018",
   "metadata": {},
   "outputs": [],
   "source": [
    "#New York Data Frame\n",
    "NY_state = [\"NY\"]\n",
    "\n",
    "NY_state_df = rent_df[rent_df['State'].isin(NY_state)]\n",
    "\n",
    "NY_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 161,
   "id": "8d754737",
   "metadata": {},
   "outputs": [],
   "source": [
    "#California Data Frame\n",
    "CA_state = [\"CA\"]\n",
    "\n",
    "CA_state_df = rent_df[rent_df['State'].isin(CA_state)]\n",
    "\n",
    "CA_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 162,
   "id": "1c7760ad",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Illinois Data Frame\n",
    "IL_state = [\"IL\"]\n",
    "\n",
    "IL_state_df = rent_df[rent_df['State'].isin(IL_state)]\n",
    "\n",
    "IL_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 163,
   "id": "6be0f054",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Texas Data Frame\n",
    "TX_state = [\"TX\"]\n",
    "\n",
    "TX_state_df = rent_df[rent_df['State'].isin(TX_state)]\n",
    "\n",
    "TX_state_df.head(20)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 164,
   "id": "c4336985",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Made all of the columns into a list\n",
    "columns_list = ['January 2011',\n",
    "'February 2011','March 2011','April 2011','May 2011','June 2011','July 2011',\n",
    "'August 2011','September 2011','October 2011','November 2011','December 2011',\n",
    "'January 2012','February 2012','March 2012','April 2012','May 2012','June 2012',\n",
    "'July 2012','August 2012','September 2012','October 2012','November 2012','December 2012',\n",
    "'January 2013','February 2013','March 2013','April 2013','May 2013','June 2013','July 2013',\n",
    "'August 2013','September 2013','October 2013','November 2013','December 2013','January 2014',\n",
    "'February 2014','March 2014','April 2014','May 2014','June 2014','July 2014','August 2014',\n",
    "'September 2014','October 2014','November 2014','December 2014','January 2015','February 2015',\n",
    "'March 2015','April 2015','May 2015','June 2015','July 2015','August 2015','September 2015','October 2015',\n",
    "'November 2015','December 2015','January 2016','February 2016','March 2016','April 2016','May 2016',\n",
    "'June 2016','July 2016','August 2016','September 2016','October 2016','November 2016','December 2016']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 165,
   "id": "a2a98fc1",
   "metadata": {},
   "outputs": [],
   "source": [
    "# US median rent prices\n",
    "US_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    US_med_rent = np.median(clean_rent_df[i])\n",
    "\n",
    "    US_med_list.append(US_med_rent)\n",
    "\n",
    "print(US_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 166,
   "id": "277a3c11",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put US med rent prices for each month and year into a DF\n",
    "US_med_df = pd.DataFrame(US_med_list, columns_list).T \n",
    "\n",
    "US_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 167,
   "id": "810a5751",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in IL\n",
    "IL_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    IL_med_rent = np.median(IL_state_df[i])\n",
    "\n",
    "    IL_med_list.append(IL_med_rent)\n",
    "\n",
    "print(IL_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 168,
   "id": "2565d248",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put IL med rent prices for each month and year into a DF\n",
    "IL_med_df = pd.DataFrame(IL_med_list, columns_list).T \n",
    "\n",
    "IL_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 169,
   "id": "550e58cb",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in CA\n",
    "CA_med_list = []\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    CA_med_rent = np.median(CA_state_df[i])\n",
    "\n",
    "    CA_med_list.append(CA_med_rent)\n",
    "\n",
    "print(CA_med_list)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 170,
   "id": "33c14292",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put CA med rent prices for each month and year into a DF\n",
    "CA_med_df = pd.DataFrame(CA_med_list, columns_list).T \n",
    "\n",
    "CA_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 171,
   "id": "6ab1de3f",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in TX\n",
    "TX_med_list=[]\n",
    "for i in columns_list:\n",
    "\n",
    "    TX_med_rent = np.median(TX_state_df[i])\n",
    "\n",
    "    TX_med_list.append(TX_med_rent)\n",
    "\n",
    "print(TX_med_list)  \n",
    "\n",
    "   "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 172,
   "id": "1d5a4c8e",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Put TX med rent prices for each month and year into a DF\n",
    "TX_med_df = pd.DataFrame(TX_med_list, columns_list).T \n",
    "\n",
    "TX_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 173,
   "id": "de450419",
   "metadata": {},
   "outputs": [],
   "source": [
    "# For loop to calculate the median value of each column in NY\n",
    "NY_med_list=[]\n",
    "\n",
    "for i in columns_list:\n",
    "\n",
    "    NY_med_rent = np.median(NY_state_df[i])\n",
    "    NY_med_list.append(NY_med_rent)\n",
    "\n",
    "print(NY_med_list)  "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 174,
   "id": "c5c815af",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Put NY med rent prices for each month and year into a DF\n",
    "NY_med_df = pd.DataFrame(NY_med_list, columns_list).T \n",
    "\n",
    "NY_med_df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 175,
   "id": "d1dcc8bb",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Combined Median rent data for 4 states\n",
    "TX_CA_df = pd.concat([TX_med_df, CA_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "IL_NY_df = pd.concat([IL_med_df, NY_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "states_med_rent = pd.concat([TX_CA_df, IL_NY_df], axis=0, ignore_index=True)\n",
    "\n",
    "#0 = TX, 1 = CA, 2 = IL, 3 = NY\n",
    "states_med_rent.insert(0, \"States\", [\"TX\", \"CA\", \"IL\", \"NY\"])\n",
    "\n",
    "states_med_rent.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 176,
   "id": "520f5c1e",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Created a table with US Med in it\n",
    "\n",
    "ALL_med_rent = pd.concat([states_med_rent, US_med_df], axis=0, ignore_index=True)\n",
    "\n",
    "#ALL_med_rent.reset_index(drop=True)\n",
    "#ALL_med_rent.set_index('State', inplace=True, drop=True)\n",
    "#ALL_med_rent[ALL_med_rent.index[-1]] = \"US\"\n",
    "ALL_med_rent.insert(0, \"State\", [\"TX\", \"CA\", \"IL\", \"NY\", \"US\"])\n",
    "\n",
    "ALL_med_rent.drop([\"States\"], axis = 1, inplace=True)\n",
    "ALL_med_rent.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 177,
   "id": "d408576f",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for TX by year and make df\n",
    "TX_2011_rents = [1194.0, 1189.0, 1186.0, 1183.0, 1182.0, 1189.0, 1184.0, 1179.0, 1181.0, 1174.0, 1173.0, 1167.0]\n",
    "TX_2012_rents = [1164.0, 1162.0, 1165.0, 1159.0, 1155.0, 1158.0, 1168.0, 1172.0, 1177.0, 1179.0, 1173.0, 1171.0]\n",
    "TX_2013_rents = [1175.0, 1174.0, 1181.0, 1196.0, 1202.0, 1200.0, 1197.0, 1201.0, 1205.0, 1208.0, 1212.0, 1221.0]\n",
    "TX_2014_rents = [1224.0, 1224.0, 1222.0, 1225.0, 1221.0, 1218.0, 1221.0, 1234.0, 1245.0, 1256.0, 1272.0, 1275.0]\n",
    "TX_2015_rents = [1282.0, 1287.0, 1289.0, 1297.0, 1300.0, 1309.0, 1313.0, 1319.0, 1323.0, 1325.0, 1320.0, 1312.0]\n",
    "TX_2016_rents = [1313.0, 1319.0, 1326.0, 1325.0, 1338.0, 1346.0, 1350.0, 1343.0, 1340.0, 1335.0, 1335.0, 1337.0]\n",
    "\n",
    "\n",
    "TX_2011_med = np.median(TX_2011_rents)\n",
    "TX_2012_med = np.median(TX_2012_rents)\n",
    "TX_2013_med = np.median(TX_2013_rents)\n",
    "TX_2014_med = np.median(TX_2014_rents)\n",
    "TX_2015_med = np.median(TX_2015_rents)\n",
    "TX_2016_med = np.median(TX_2016_rents)\n",
    "\n",
    "TX_yearly_rent = {\"2011\":[TX_2011_med], \"2012\" :[TX_2012_med], \"2013\" :[TX_2013_med], \"2014\" :[TX_2014_med], \"2015\" :[TX_2015_med], \"2016\" :[TX_2016_med]}\n",
    "\n",
    "TX_yearly_rent_df = pd.DataFrame(TX_yearly_rent)\n",
    "\n",
    "TX_yearly_rent_df.insert(0, \"State\", [\"TX\"])\n",
    "\n",
    "TX_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "TX_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 178,
   "id": "473d9560",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for CA by year and make df\n",
    "CA_2011_rents = [1770.0, 1754.0, 1738.5, 1729.0, 1716.5, 1717.5, 1719.5, 1718.0, 1712.5, 1710.5, 1710.0, 1705.0]\n",
    "CA_2012_rents = [1702.5, 1695.5, 1696.5, 1697.0, 1700.5, 1713.5, 1710.5, 1709.0, 1702.0, 1704.5, 1700.0, 1701.0]\n",
    "CA_2013_rents = [1707.5, 1718.5, 1728.0, 1735.0, 1743.0, 1756.5, 1763.0, 1764.5, 1767.0, 1773.5, 1779.5, 1781.5]\n",
    "CA_2014_rents = [1782.5, 1781.0, 1785.5, 1784.5, 1787.0, 1790.0, 1794.0, 1807.5, 1824.0, 1842.5, 1859.5, 1875.0]\n",
    "CA_2015_rents = [1885.0, 1899.0, 1907.0, 1921.5, 1935.0, 1946.0, 1957.0, 1969.0, 1977.0, 1982.0, 1995.0, 2004.0]\n",
    "CA_2016_rents = [2014.5, 2036.5, 2056.0, 2062.5, 2072.0, 2092.0, 2104.0, 2115.0, 2124.5, 2128.5, 2134.0, 2150.5]\n",
    "\n",
    "CA_2011_med = np.median(CA_2011_rents)\n",
    "CA_2012_med = np.median(CA_2012_rents)\n",
    "CA_2013_med = np.median(CA_2013_rents)\n",
    "CA_2014_med = np.median(CA_2014_rents)\n",
    "CA_2015_med = np.median(CA_2015_rents)\n",
    "CA_2016_med = np.median(CA_2016_rents)\n",
    "\n",
    "CA_yearly_rent = {\"2011\":[CA_2011_med], \"2012\" :[CA_2012_med], \"2013\" :[CA_2013_med], \"2014\" :[CA_2014_med], \"2015\" :[CA_2015_med], \"2016\" :[CA_2016_med]}\n",
    "\n",
    "CA_yearly_rent_df = pd.DataFrame(CA_yearly_rent)\n",
    "\n",
    "CA_yearly_rent_df.insert(0, \"State\", [\"CA\"])\n",
    "\n",
    "CA_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "CA_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 179,
   "id": "495a97b3",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for IL by year and make df\n",
    "IL_2011_rents = [1425.0, 1426.0, 1422.5, 1421.5, 1413.5, 1406.5, 1392.5, 1382.0, 1380.0, 1370.0, 1363.5, 1355.5]\n",
    "IL_2012_rents = [1349.0, 1344.0, 1341.0, 1344.0, 1344.0, 1347.5, 1347.0, 1346.0, 1351.0, 1359.5, 1371.0, 1370.0]\n",
    "IL_2013_rents = [1364.5, 1351.5, 1345.5, 1347.0, 1354.0, 1360.0, 1363.0, 1364.5, 1372.5, 1379.0, 1385.5, 1392.0]\n",
    "IL_2014_rents = [1399.0, 1400.5, 1395.0, 1393.0, 1387.0, 1385.5, 1379.5, 1384.0, 1385.0, 1386.5, 1397.0, 1406.5]\n",
    "IL_2015_rents = [1411.5, 1408.0, 1416.5, 1414.5, 1413.0, 1413.0, 1414.5, 1414.0, 1411.0, 1403.0, 1398.5, 1396.0]\n",
    "IL_2016_rents = [1405.5, 1408.0, 1413.0, 1416.5, 1424.5, 1424.0, 1431.0, 1426.5, 1418.0, 1410.0, 1405.0, 1397.0]\n",
    "\n",
    "IL_2011_med = np.median(IL_2011_rents)\n",
    "IL_2012_med = np.median(IL_2012_rents)\n",
    "IL_2013_med = np.median(IL_2013_rents)\n",
    "IL_2014_med = np.median(IL_2014_rents)\n",
    "IL_2015_med = np.median(IL_2015_rents)\n",
    "IL_2016_med = np.median(IL_2016_rents)\n",
    "\n",
    "IL_yearly_rent = {\"2011\":[IL_2011_med], \"2012\" :[IL_2012_med], \"2013\" :[IL_2013_med], \"2014\" :[IL_2014_med], \"2015\" :[IL_2015_med], \"2016\" :[IL_2016_med]}\n",
    "\n",
    "IL_yearly_rent_df = pd.DataFrame(IL_yearly_rent)\n",
    "\n",
    "IL_yearly_rent_df.insert(0, \"State\", [\"IL\"])\n",
    "\n",
    "IL_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "IL_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 180,
   "id": "4d39e92b",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for NY by year and make df\n",
    "NY_2011_rents = [1369.5, 1383.5, 1380.5, 1388.0, 1390.5, 1401.0, 1401.0, 1399.0, 1397.0, 1399.0, 1400.5, 1399.0]\n",
    "NY_2012_rents = [1391.5, 1383.0, 1376.0, 1378.0, 1396.0, 1411.0, 1428.5, 1438.0, 1437.5, 1431.0, 1417.5, 1416.0]\n",
    "NY_2013_rents = [1419.5, 1432.0, 1434.0, 1431.5, 1434.0, 1418.5, 1384.5, 1368.5, 1366.5, 1379.0, 1398.5, 1395.0]\n",
    "NY_2014_rents = [1378.5, 1360.0, 1357.5, 1351.0, 1341.0, 1342.0, 1362.5, 1382.0, 1400.5, 1410.0, 1418.5, 1430.0]\n",
    "NY_2015_rents = [1440.5, 1443.0, 1449.0, 1448.5, 1444.5, 1437.5, 1428.5, 1403.0, 1388.5, 1376.0, 1371.5, 1363.0]\n",
    "NY_2016_rents = [1368.0, 1365.0, 1374.5, 1380.0, 1385.5, 1390.5, 1401.5, 1399.0, 1394.5, 1392.5, 1389.5, 1386.5]\n",
    "\n",
    "NY_2011_med = np.median(NY_2011_rents)\n",
    "NY_2012_med = np.median(NY_2012_rents)\n",
    "NY_2013_med = np.median(NY_2013_rents)\n",
    "NY_2014_med = np.median(NY_2014_rents)\n",
    "NY_2015_med = np.median(NY_2015_rents)\n",
    "NY_2016_med = np.median(NY_2016_rents)\n",
    "\n",
    "NY_yearly_rent = {\"2011\":[NY_2011_med], \"2012\" :[NY_2012_med], \"2013\" :[NY_2013_med], \"2014\" :[NY_2014_med], \"2015\" :[NY_2015_med], \"2016\" :[NY_2016_med]}\n",
    "\n",
    "NY_yearly_rent_df = pd.DataFrame(NY_yearly_rent)\n",
    "\n",
    "NY_yearly_rent_df.insert(0, \"State\", [\"NY\"])\n",
    "\n",
    "NY_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "NY_yearly_rent_df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 181,
   "id": "97688d7a",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Got median rent for US by year and make df\n",
    "US_2011_rents = [1218.0, 1219.0, 1220.0, 1220.0, 1218.0, 1217.0, 1214.0, 1213.0, 1210.0, 1207.0, 1206.0, 1205.0]\n",
    "US_2012_rents = [1204.0, 1205.0, 1207.0, 1206.0, 1205.0, 1205.0, 1205.0, 1206.0, 1208.0, 1210.0, 1215.0, 1215.0]\n",
    "US_2013_rents = [1215.0, 1216.0, 1217.0, 1217.0, 1218.0, 1221.0, 1224.0, 1225.0, 1228.0, 1231.0, 1235.0, 1236.0]\n",
    "US_2014_rents = [1236.0, 1234.0, 1232.0, 1229.0, 1227.0, 1223.0, 1226.0, 1232.0, 1245.0, 1253.0, 1259.0, 1263.0]\n",
    "US_2015_rents = [1269.0, 1272.0, 1276.0, 1280.0, 1284.0, 1289.0, 1295.0, 1299.0, 1298.0, 1294.0, 1293.0, 1292.0]\n",
    "US_2016_rents = [1294.0, 1298.0, 1303.0, 1308.0, 1312.0, 1313.0, 1311.0, 1306.0, 1305.0, 1305.0, 1307.0, 1308.0]\n",
    "\n",
    "US_2011_med = np.median(US_2011_rents)\n",
    "US_2012_med = np.median(US_2012_rents)\n",
    "US_2013_med = np.median(US_2013_rents)\n",
    "US_2014_med = np.median(US_2014_rents)\n",
    "US_2015_med = np.median(US_2015_rents)\n",
    "US_2016_med = np.median(US_2016_rents)\n",
    "\n",
    "US_yearly_rent = {\"2011\":[US_2011_med], \"2012\" :[US_2012_med], \"2013\" :[US_2013_med], \"2014\" :[US_2014_med], \"2015\" :[US_2015_med], \"2016\" :[US_2016_med]}\n",
    "\n",
    "US_yearly_rent_df = pd.DataFrame(US_yearly_rent)\n",
    "\n",
    "US_yearly_rent_df.insert(0, \"State\", [\"US\"])\n",
    "\n",
    "US_yearly_rent_df.set_index('State', inplace=True, drop=True)\n",
    "\n",
    "US_yearly_rent_df.head(10)\n",
    "\n",
    "#ayear = [2011,2012,2013,2014,2015,2016]\n",
    "#rent_cost = [US_2011_med,US_2012_med,US_2013_med,US_2014_med,US_2015_med,US_2016_med]\n",
    "#correlation = st.pearsonr(rent_cost,year)\n",
    "#print(f\"The correlation between both factors is {round(correlation[0],2)}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 182,
   "id": "0bdefabf",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Combined yearly rents in to one df\n",
    "TX_CA_yearly_rent_df = pd.concat([TX_yearly_rent_df, CA_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "TX_CA_yearly_rent_df\n",
    "\n",
    "IL_NY_yearly_rent_df = pd.concat([IL_yearly_rent_df, NY_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "IL_NY_yearly_rent_df\n",
    "\n",
    "states_yearly_rent_df = pd.concat([TX_CA_yearly_rent_df, IL_NY_yearly_rent_df], axis=0, ignore_index = True)\n",
    "\n",
    "states_yearly_rent_df\n",
    "\n",
    "ALL_yearly_rent_df = pd.concat([states_yearly_rent_df, US_yearly_rent_df], axis=0, ignore_index = True)\n",
    "#0 = TX, 1 = CA, 2 = IL, 3 = NY\n",
    "\n",
    "ALL_yearly_rent_df.insert(0, \"State\", ['TX', 'CA', 'IL', 'NY', 'US'])\n",
    "\n",
    "ALL_yearly_rent_df.set_index(['State'], drop=True, append=False, inplace=True, verify_integrity=False)\n",
    "#ALL_yearly_rent_df.reset_index()\n",
    "\n",
    "ALL_yearly_rent_df['Rent Change (%)'] = ((ALL_yearly_rent_df[['2011', '2016']].pct_change(axis=1)['2016'])* 100).round(2)\n",
    "\n",
    "ALL_yearly_rent_df.head(30)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 183,
   "id": "f3779bfb",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Line graph of median US Rent change from 2011-2016\n",
    "#Used https://stackoverflow.com/questions/1347791/unicode-error-unicodeescape-codec-cant-decode-bytes-cannot-open-text-file\n",
    "#To help with unicode error when trying to save plot\n",
    "\n",
    "years = [\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]\n",
    "\n",
    "US_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"US\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"US\", color=\"purple\") \n",
    "\n",
    "plt.xlabel(\"Year\")\n",
    "plt.ylabel(\"Cost of Rent (USD)\")\n",
    "plt.title(\"US Median Rent 2011-2016\")\n",
    "\n",
    "plt.savefig('Visualizations Outputs\\\\US_Rent_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 184,
   "id": "6fcbcadb",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Line graph showing all 4 states median rent prices throughout timeframe 2011-2016\n",
    "\n",
    "years = [\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\"]\n",
    "\n",
    "TX_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"TX\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"Texas\", color=\"blue\") \n",
    "\n",
    "CA_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"CA\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"California\", color=\"orange\") \n",
    "\n",
    "IL_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"IL\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"Illinois\", color=\"green\") \n",
    "\n",
    "NY_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"NY\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"New York\", color=\"red\") \n",
    "\n",
    "US_graph = plt.plot(years, ALL_yearly_rent_df.loc[\"US\",[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\",]], label=\"US\", color=\"purple\") \n",
    "\n",
    "legend_list = [\"TX\", \"CA\", \"IL\", \"NY\", \"US\"]\n",
    "plt.legend([\"TX\", \"CA\", \"IL\", \"NY\", \"US\"], loc=\"best\")\n",
    "\n",
    "\n",
    "plt.xlabel(\"Year\")\n",
    "plt.ylabel(\"Cost of Rent (USD)\")\n",
    "plt.title(\"US, TX, CA, IL, NY Median Rent Prices 2011-2016\")\n",
    "plt.savefig('Visualizations Outputs\\All_Rent_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 185,
   "id": "60259029",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Bar graph showing the change in rent (%)\n",
    "rent_change_bar = ALL_yearly_rent_df['Rent Change (%)'].plot(kind=\"bar\", color=[\"blue\", \"orange\", \"green\", \"red\", \"purple\"], figsize=(8,6),\n",
    "                                   title=\"Rent Change by State (%)\",\n",
    "                                   xlabel=\"State\",\n",
    "                                   ylabel=\"Percent of Change\")\n",
    "rent_change_bar.axhline(y=0, color= 'black', linewidth=1,)\n",
    "\n",
    "plt.savefig('Visualizations Outputs\\Change_Rent_graph.png')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 186,
   "id": "0e1371ac",
   "metadata": {},
   "outputs": [],
   "source": [
    "year = [2011,2011, 2011, 2011, 2012, 2012, 2012, 2012, 2013, 2013, 2013, 2013, 2014, 2014, 2014, 2014, 2015, 2015, 2015, 2015, 2016, 2016, 2016, 2016]\n",
    "rent_cost = [1182.50,1717.75,1399.50,1398.00, 1166.50,1701.50,1347.25,1413.50,1200.50,1759.75,1363.75,1408.50,1224.5,1792.0,1390.0,1370.5,1310.50,1951.50,1412.25,1433.00,1336.00,2098.00,1414.75,1388.00]\n",
    "correlation = st.pearsonr(rent_cost,year)\n",
    "print(f\"The correlation between both factors is {round(correlation[0],2)}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 187,
   "id": "851bd8f3",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Box plot for data\n",
    "\n",
    "rents_data = pd.DataFrame({\"TX\": [1182.50,1166.50,1200.50,1224.5,1310.50,1336.00], \"CA\": [1717.75,1701.50,1759.75,1792.0,1951.50,2098.00], \n",
    "\"IL\": [1399.50,1347.25,1363.75,1390.0,1412.25,1414.75], \"NY\": [1398.00,1413.50,1408.50,1370.5,1433.00,1388.00], \"US\": [1215.5,1206.0,1222.5,1233.0,1290.5,1306.5]})\n",
    "\n",
    "# Plot the dataframe\n",
    "ax = rents_data[['TX', 'CA', 'IL', 'NY', 'US']].plot(kind='box', title='Boxplot for USA, TX, CA, IL, NY')\n",
    "\n",
    "# Display the plot\n",
    "plt.savefig('Visualizations Outputs\\Boxplot_graph.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 188,
   "id": "c2385f2a",
   "metadata": {},
   "outputs": [],
   "source": [
    "# New dataframe where the states are the columns\n",
    "# New dataframe where the states are the columns\n",
    "ALL_yearly_rent_df_t= ALL_yearly_rent_df[[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\"]].T"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 189,
   "id": "2e04ec97",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Histogram\n",
    "labels = []\n",
    "for state in ALL_yearly_rent_df_t.columns:\n",
    "    plt.hist(ALL_yearly_rent_df_t[state]) \n",
    "    labels.append(state)\n",
    "\n",
    "    plt.xlabel('Rent Values')\n",
    "    plt.ylabel('Frequency')\n",
    "    plt.title('Histogram of Rent')\n",
    "    \n",
    "plt.legend(labels)\n",
    "plt.savefig('Visualizations Outputs\\Histogram.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 190,
   "id": "5c6b14ef",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Scatterplot to show USA median rent data over time\n",
    "#Used https://stackabuse.com/change-tick-frequency-in-matplotlib/\n",
    "#to help with spacing out x ticks\n",
    "USAdata={\n",
    "    \"Dates\":columns_list,\n",
    "    \"Prices\":US_med_list\n",
    "}\n",
    "\n",
    "USAdf=pd.DataFrame(USAdata)\n",
    "\n",
    "USAdf.plot(x ='Dates', y ='Prices', kind='scatter')\n",
    "plt.title(\"USA Median Rent Scatter 2011-2016\")\n",
    "plt.xlabel(\"Mos/Year\")\n",
    "plt.xticks(np.arange(0, len(columns_list), 5),rotation=60)\n",
    "plt.ylabel(\"Rent Cost ($)\")\n",
    "plt.savefig('Visualizations Outputs\\\\USA_Scatter.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 191,
   "id": "3370031e",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Scatterplot to show IL median rent data over time\n",
    "#Used https://stackabuse.com/change-tick-frequency-in-matplotlib/\n",
    "#to help with spacing out x ticks\n",
    "illinoisdata={\n",
    "    \"Dates\":columns_list,\n",
    "    \"Prices\":IL_med_list\n",
    "}\n",
    "\n",
    "illinoisdf=pd.DataFrame(illinoisdata)\n",
    "\n",
    "illinoisdf.plot(x ='Dates', y ='Prices', kind='scatter')\n",
    "plt.title(\"Illinois Median Rent Scatter 2011-2016\")\n",
    "plt.xlabel(\"Mos/Year\")\n",
    "plt.xticks(np.arange(0, len(columns_list), 5),rotation=60)\n",
    "plt.ylabel(\"Rent Cost ($)\")\n",
    "plt.savefig('Visualizations Outputs\\IL_Scatter.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 192,
   "id": "6a8d1e1b",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Scatterplot to show CA median rent data overtime\n",
    "#Used https://stackabuse.com/change-tick-frequency-in-matplotlib/\n",
    "#to help with spacing out x ticks\n",
    "californiadata={\n",
    "    \"Dates\":columns_list,\n",
    "    \"Prices\":CA_med_list\n",
    "}\n",
    "\n",
    "californiadf=pd.DataFrame(californiadata)\n",
    "\n",
    "californiadf.plot(x ='Dates', y ='Prices', kind='scatter')\n",
    "plt.title(\"California Median Rent Scatter 2011-2016\")\n",
    "plt.xlabel(\"Mos/Year\")\n",
    "plt.xticks(np.arange(0, len(columns_list), 5),rotation=60)\n",
    "plt.ylabel(\"Rent Cost ($)\")\n",
    "plt.savefig('Visualizations Outputs\\CA_Scatter.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 193,
   "id": "e3502e89",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Scatterplot to show NY median rent data overtime\n",
    "#Used https://stackoverflow.com/questions/1347791/unicode-error-unicodeescape-codec-cant-decode-bytes-cannot-open-text-file\n",
    "#To help with unicode error when trying to save plot\n",
    "#Used https://stackabuse.com/change-tick-frequency-in-matplotlib/\n",
    "#to help with spacing out x ticks\n",
    "\n",
    "newyorkdata={\n",
    "    \"Dates\":columns_list,\n",
    "    \"Prices\":NY_med_list\n",
    "}\n",
    "\n",
    "newyorkdf=pd.DataFrame(newyorkdata)\n",
    "# texasdf.head()\n",
    "\n",
    "newyorkdf.plot(x ='Dates', y ='Prices', kind='scatter')\n",
    "# plt.grid(True)\n",
    "plt.title(\"New York Median Rent Scatter 2011-2016\")\n",
    "plt.xlabel(\"Mos/Year\")\n",
    "plt.xticks(np.arange(0, len(columns_list), 5),rotation=60)\n",
    "plt.ylabel(\"Rent Cost ($)\")\n",
    "plt.savefig('Visualizations Outputs\\\\NY_Scatter.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 194,
   "id": "a626cf6d",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Scatterplot to show Texas median rent data overtime\n",
    "#Used https://stackabuse.com/change-tick-frequency-in-matplotlib/\n",
    "#to help with spacing out x ticks\n",
    "texasdata={\n",
    "    \"Dates\":columns_list,\n",
    "    \"Prices\":TX_med_list\n",
    "}\n",
    "\n",
    "texasdf=pd.DataFrame(texasdata)\n",
    "\n",
    "texasdf.plot(x ='Dates', y ='Prices', kind='scatter')\n",
    "# plt.grid(True)\n",
    "plt.title(\"Texas Median Rent Scatter 2011-2016\")\n",
    "plt.xlabel(\"Mos/Year\")\n",
    "plt.xticks(np.arange(0, len(columns_list), 5),rotation=60)\n",
    "plt.ylabel(\"Rent Cost ($)\")\n",
    "plt.savefig('Visualizations Outputs\\TX_Scatter.png')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 195,
   "id": "2206bcfe",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Using Chi Square Test for change in rent\n",
    "CA_obs = pd.Series([1717.75,1701.50,1759.75,1792.0,1951.50,2098.00], index=[\"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\"])\n",
    "#[1215.5,1206.0,1222.5,1233.0,1290.5,1306.5]\n",
    "\n",
    "CA_Chi_SQ_df = pd.DataFrame(CA_obs)\n",
    "\n",
    "CA_Chi_SQ_df[1] = [1215.5,1206.0,1222.5,1233.0,1290.5,1306.5]\n",
    "\n",
    "CA_Chi_SQ_df.columns = [\"CA Observed\", \"Expected\"]\n",
    "\n",
    "CA_Chi_SQ_df.T"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 196,
   "id": "2d234c55",
   "metadata": {},
   "outputs": [],
   "source": [
    "scaler = StandardScaler()\n",
    "CA_Chi_SQ_df_scaled = scaler.fit_transform(CA_Chi_SQ_df)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 197,
   "id": "f67bf958",
   "metadata": {},
   "outputs": [],
   "source": [
    "CA_Chi_SQ_df_scaled[:,0]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 198,
   "id": "fc449085",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Quartiles and outliers\n",
    "quartiles_columns = ALL_yearly_rent_df_t.columns\n",
    "\n",
    "for column in quartiles_columns:\n",
    "    quartiles = np.percentile(ALL_yearly_rent_df_t[column], [25, 50, 75])\n",
    "    lower_q = np.percentile(ALL_yearly_rent_df_t, 25)\n",
    "    upper_q = np.percentile(ALL_yearly_rent_df_t, 75)\n",
    "\n",
    "    IQR = upper_q - lower_q\n",
    "\n",
    "    lower_bound = lower_q - 1.5 * IQR\n",
    "    upper_bound = upper_q + 1.5 * IQR\n",
    "\n",
    "    outliers = ALL_yearly_rent_df_t.loc[(ALL_yearly_rent_df_t[column] < lower_bound) | (ALL_yearly_rent_df_t[column] > upper_bound)]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 199,
   "id": "8d8127ef",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Summary Statistics\n",
    "summary_stats = ALL_yearly_rent_df_t.describe()\n",
    "summary_stats"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 200,
   "id": "9f7d8486",
   "metadata": {},
   "outputs": [],
   "source": [
    "#Dependencies and Set Up\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "import matplotlib.pyplot as plt\n",
    "import scipy.stats as st\n",
    "from scipy.stats import linregress\n",
    "import seaborn as sns  # For heatmap visualization\n",
    "from sklearn.preprocessing import StandardScaler"
   ]
  }
 ],
 "metadata": {},
 "nbformat": 4,
 "nbformat_minor": 5
}
